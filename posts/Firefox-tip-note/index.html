<!DOCTYPE html><html lang="en-US" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="Firefox tip note" /><meta name="author" content="nonetype" /><meta property="og:locale" content="en_US" /><meta name="description" content="Tip note for Firefox analysis &amp; exploitation" /><meta property="og:description" content="Tip note for Firefox analysis &amp; exploitation" /><link rel="canonical" href="https://nonetype.kr/posts/Firefox-tip-note/" /><meta property="og:url" content="https://nonetype.kr/posts/Firefox-tip-note/" /><meta property="og:site_name" content="do:pwn()" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-03-23T00:00:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Firefox tip note" /><meta name="twitter:site" content="@nonetype_pwn" /><meta name="twitter:creator" content="@nonetype" /><meta name="google-site-verification" content="googlef894166fa16bb09c" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"nonetype"},"description":"Tip note for Firefox analysis &amp; exploitation","url":"https://nonetype.kr/posts/Firefox-tip-note/","headline":"Firefox tip note","dateModified":"2020-12-02T12:40:53+08:00","datePublished":"2020-03-23T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://nonetype.kr/posts/Firefox-tip-note/"},"@type":"BlogPosting","@context":"https://schema.org"}</script><title>Firefox tip note | do:pwn()</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="do:pwn()"><meta name="application-name" content="do:pwn()"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-HLXHMG7DE3"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-HLXHMG7DE3'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/avatar/me.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">do:pwn()</a></div><div class="site-subtitle font-italic">AttributeError - 'NoneType'</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/nonetype" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/nonetype_pwn" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['exploit','kakao.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Firefox tip note</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Firefox tip note</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> nonetype </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Mon, Mar 23, 2020, 12:00 AM +0800" prep="on" > Mar 23, 2020 <i class="unloaded">2020-03-23T00:00:00+08:00</i> </span></div><div> <span> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Wed, Dec 2, 2020, 1:40 PM +0900" prefix="Updated " > Dec 2, 2020 <i class="unloaded">2020-12-02T12:40:53+08:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="12142 words">67 min</span></div></div><div class="post-content"><p>Tip note for Firefox analysis &amp; exploitation</p><h1 id="index">Index</h1><ul><li><a href="#index">Index</a><li><a href="#firefox-note">Firefox note</a><ul><li><a href="#build">Build</a><li><a href="#debug-array-object">Debug Array object</a><ul><li><a href="#understand-type-masking">Understand Type Masking</a></ul><li><a href="#shape-debugging">Shape Debugging</a><li><a href="#whats-0xe5e5e5e5e5e5e5e5-">What’s 0xe5e5e5e5e5e5e5e5 ???</a><li><a href="#object-storages">Object storages</a><ul><li><a href="#inline-properties">Inline properties</a><li><a href="#out-of-line-properties">Out-of-line properties</a><li><a href="#elements">Elements</a><li><a href="#summary">Summary</a></ul></ul><li><a href="#troubleshooting">Troubleshooting</a><ul><li><a href="#typeerror-cannot-create-nonetype-instances-while-jssrcconfigure">TypeError: cannot create ‘NoneType’ instances while js/src/configure</a><ul><li><a href="#solution">Solution</a></ul><li><a href="#error-cannot-find-llvm-objdump">ERROR: Cannot find llvm-objdump</a><ul><li><a href="#solution-1">Solution</a></ul><li><a href="#error-could-not-find-autoconf-213">ERROR: Could not find autoconf 2.13</a><ul><li><a href="#solution-2">Solution</a></ul><li><a href="#error-cannot-find-cbindgen">ERROR: Cannot find cbindgen.</a><ul><li><a href="#solution-3">Solution</a></ul><li><a href="#error-could-not-find-clang-to-generate-run-bindings-for-cc">ERROR: Could not find clang to generate run bindings for C/C++</a><ul><li><a href="#solution-4">Solution</a></ul><li><a href="#error-could-not-find-nodejs-executable-later-than-811">ERROR: could not find Node.js executable later than 8.11</a><ul><li><a href="#solution-5">Solution</a></ul><li><a href="#error-nasm-213-or-greater-is-required-for-av1-support">ERROR: nasm 2.13 or greater is required for AV1 support</a><ul><li><a href="#solution-6">Solution</a></ul><li><a href="#error-yasm-is-required-to-build-with-ffvpx-jpeg-libav-and-vpx">ERROR: Yasm is required to build with ffvpx, jpeg, libav and vpx</a><ul><li><a href="#solution-7">Solution</a></ul><li><a href="#configure-error-library-requirements">configure: error: Library requirements</a><ul><li><a href="#solution-8">Solution</a></ul></ul><li><a href="#references">References</a></ul><h1 id="firefox-note">Firefox note</h1><h2 id="build">Build</h2><p>Firefox 소스 코드는 <a href="https://ftp.mozilla.org/pub/firefox/releases/72.0/source/">여기</a>에서 받을 수 있다. (<code class="language-plaintext highlighter-rouge">ftp.mozilla.org/pub/firefox/releases/version to build/source</code>)</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nb">tar</span> <span class="nt">-xvf</span> firefox-[version].source.tar.xz
<span class="nb">sudo </span>apt-get <span class="nb">install </span>nasm yasm clang nodejs rustc cargo llvm python-pip gcc make g++ perl python autoconf autoconf2.13 libgtk2.0-dev <span class="nt">-y</span>
<span class="nb">mkdir </span>build-[version]
<span class="nb">cd </span>build-[version]
../firefox-[version]/js/src/configure <span class="nt">--enable-debug</span>
make
./dist/bin/js
</pre></table></code></div></div><p>혹은 아래와 같이 <code class="language-plaintext highlighter-rouge">gecko-dev</code> Repo를 통해 빌드할 수 있다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>git clone https://github.com/mozilla/gecko-dev.git
<span class="nb">cd </span>gecko-dev
git checkout <span class="o">[</span>commit number]
<span class="nb">cd </span>js/src
<span class="nb">mkdir </span>build.asserts
<span class="nb">cd </span>build.asserts
/bin/sh ../configure.in <span class="nt">--enable-debug</span>
make
</pre></table></code></div></div><p>이후 <code class="language-plaintext highlighter-rouge">js&gt; </code> 형식의 인터프리터 쉘 창이 뜨면 성공!</p><h2 id="debug-array-object">Debug Array object</h2><p>gdb를 통해 array object가 어떤 방식으로 참조되는지 알아보자.</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
</pre><td class="rouge-code"><pre><span class="n">nonetype</span><span class="err">@</span><span class="n">box</span><span class="o">:~/</span><span class="n">hack</span><span class="o">/</span><span class="n">browser</span><span class="o">/</span><span class="n">firefox</span><span class="o">/</span><span class="n">build</span><span class="o">-</span><span class="mf">72.0</span><span class="err">$</span> <span class="n">gdb</span> <span class="n">dist</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">js</span>
<span class="n">Reading</span> <span class="n">symbols</span> <span class="n">from</span> <span class="n">dist</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">js</span><span class="p">...</span><span class="n">done</span><span class="p">.</span>
<span class="n">warning</span><span class="o">:</span> <span class="n">File</span> <span class="s">"/home/nonetype/hack/browser/firefox/build-72.0/dist/bin/js-gdb.py"</span> <span class="k">auto</span><span class="o">-</span><span class="n">loading</span> <span class="n">has</span> <span class="n">been</span> <span class="n">declined</span> <span class="n">by</span> <span class="n">your</span> <span class="err">'</span><span class="k">auto</span><span class="o">-</span><span class="n">load</span> <span class="n">safe</span><span class="o">-</span><span class="n">path</span><span class="err">'</span> <span class="n">set</span> <span class="n">to</span> <span class="s">"$debugdir:$datadir/auto-load"</span><span class="p">.</span>
<span class="n">To</span> <span class="n">enable</span> <span class="n">execution</span> <span class="n">of</span> <span class="k">this</span> <span class="n">file</span> <span class="n">add</span>
        <span class="n">add</span><span class="o">-</span><span class="k">auto</span><span class="o">-</span><span class="n">load</span><span class="o">-</span><span class="n">safe</span><span class="o">-</span><span class="n">path</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">nonetype</span><span class="o">/</span><span class="n">hack</span><span class="o">/</span><span class="n">browser</span><span class="o">/</span><span class="n">firefox</span><span class="o">/</span><span class="n">build</span><span class="o">-</span><span class="mf">72.0</span><span class="o">/</span><span class="n">dist</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">js</span><span class="o">-</span><span class="n">gdb</span><span class="p">.</span><span class="n">py</span>
<span class="n">line</span> <span class="n">to</span> <span class="n">your</span> <span class="n">configuration</span> <span class="n">file</span> <span class="s">"/home/nonetype/.gdbinit"</span><span class="p">.</span>
<span class="n">To</span> <span class="n">completely</span> <span class="n">disable</span> <span class="k">this</span> <span class="n">security</span> <span class="n">protection</span> <span class="n">add</span>
        <span class="n">set</span> <span class="k">auto</span><span class="o">-</span><span class="n">load</span> <span class="n">safe</span><span class="o">-</span><span class="n">path</span> <span class="o">/</span>
<span class="n">line</span> <span class="n">to</span> <span class="n">your</span> <span class="n">configuration</span> <span class="n">file</span> <span class="s">"/home/nonetype/.gdbinit"</span><span class="p">.</span>
<span class="n">For</span> <span class="n">more</span> <span class="n">information</span> <span class="n">about</span> <span class="k">this</span> <span class="n">security</span> <span class="n">protection</span> <span class="n">see</span> <span class="n">the</span>
<span class="s">"Auto-loading safe path"</span> <span class="n">section</span> <span class="n">in</span> <span class="n">the</span> <span class="n">GDB</span> <span class="n">manual</span><span class="p">.</span>  <span class="n">E</span><span class="p">.</span><span class="n">g</span><span class="p">.,</span> <span class="n">run</span> <span class="n">from</span> <span class="n">the</span> <span class="n">shell</span><span class="o">:</span>
        <span class="n">info</span> <span class="s">"(gdb)Auto-loading safe path"</span>
<span class="n">GEF</span> <span class="k">for</span> <span class="n">linux</span> <span class="n">ready</span><span class="p">,</span> <span class="n">type</span> <span class="err">'</span><span class="n">gef</span><span class="err">'</span> <span class="n">to</span> <span class="n">start</span><span class="p">,</span> <span class="err">'</span><span class="n">gef</span> <span class="n">config</span><span class="err">'</span> <span class="n">to</span> <span class="n">configure</span>
<span class="mi">77</span> <span class="n">commands</span> <span class="n">loaded</span> <span class="k">for</span> <span class="n">GDB</span> <span class="mf">8.1.0.20180409</span><span class="o">-</span><span class="n">git</span> <span class="k">using</span> <span class="n">Python</span> <span class="n">engine</span> <span class="mf">3.6</span>
<span class="p">[</span><span class="o">*</span><span class="p">]</span> <span class="mi">3</span> <span class="n">commands</span> <span class="n">could</span> <span class="n">not</span> <span class="n">be</span> <span class="n">loaded</span><span class="p">,</span> <span class="n">run</span> <span class="err">'</span><span class="n">gef</span> <span class="n">missing</span><span class="err">'</span> <span class="n">to</span> <span class="n">know</span> <span class="n">why</span><span class="p">.</span>
<span class="n">Error</span> <span class="k">while</span> <span class="n">writing</span> <span class="n">index</span> <span class="k">for</span> <span class="err">'</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">nonetype</span><span class="o">/</span><span class="n">hack</span><span class="o">/</span><span class="n">browser</span><span class="o">/</span><span class="n">firefox</span><span class="o">/</span><span class="n">build</span><span class="o">-</span><span class="mf">72.0</span><span class="o">/</span><span class="n">dist</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">js</span><span class="err">'</span><span class="o">:</span> <span class="n">Can</span><span class="err">'</span><span class="n">t</span> <span class="n">open</span> <span class="err">'</span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">gef</span><span class="o">/</span><span class="n">js</span><span class="p">.</span><span class="n">gdb</span><span class="o">-</span><span class="n">index</span><span class="err">'</span> <span class="k">for</span> <span class="n">writing</span>
<span class="n">gef</span><span class="err">➤</span>  <span class="n">b</span> <span class="o">*</span> <span class="n">js</span><span class="o">::</span><span class="n">math_atan</span>
<span class="n">Breakpoint</span> <span class="mi">1</span> <span class="n">at</span> <span class="mh">0xaf2e60</span><span class="o">:</span> <span class="n">file</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">nonetype</span><span class="o">/</span><span class="n">hack</span><span class="o">/</span><span class="n">browser</span><span class="o">/</span><span class="n">firefox</span><span class="o">/</span><span class="n">firefox</span><span class="o">-</span><span class="mf">72.0</span><span class="o">/</span><span class="n">js</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">jsmath</span><span class="p">.</span><span class="n">cpp</span><span class="p">,</span> <span class="n">line</span> <span class="mf">145.</span>
<span class="n">gef</span><span class="err">➤</span>  <span class="n">r</span>
<span class="n">Starting</span> <span class="n">program</span><span class="o">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">nonetype</span><span class="o">/</span><span class="n">hack</span><span class="o">/</span><span class="n">browser</span><span class="o">/</span><span class="n">firefox</span><span class="o">/</span><span class="n">build</span><span class="o">-</span><span class="mf">72.0</span><span class="o">/</span><span class="n">dist</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">js</span>
<span class="p">[</span><span class="n">Thread</span> <span class="n">debugging</span> <span class="k">using</span> <span class="n">libthread_db</span> <span class="n">enabled</span><span class="p">]</span>
<span class="n">Using</span> <span class="n">host</span> <span class="n">libthread_db</span> <span class="n">library</span> <span class="s">"/lib/x86_64-linux-gnu/libthread_db.so.1"</span><span class="p">.</span>
<span class="p">[</span><span class="n">New</span> <span class="n">Thread</span> <span class="mh">0x7ffff648e700</span> <span class="p">(</span><span class="n">LWP</span> <span class="mi">12491</span><span class="p">)]</span>
<span class="p">[</span><span class="n">New</span> <span class="n">Thread</span> <span class="mh">0x7ffff5aff700</span> <span class="p">(</span><span class="n">LWP</span> <span class="mi">12492</span><span class="p">)]</span>
<span class="p">[</span><span class="n">Thread</span> <span class="mh">0x7ffff648e700</span> <span class="p">(</span><span class="n">LWP</span> <span class="mi">12491</span><span class="p">)</span> <span class="n">exited</span><span class="p">]</span>
<span class="p">[</span><span class="n">New</span> <span class="n">Thread</span> <span class="mh">0x7ffff5900700</span> <span class="p">(</span><span class="n">LWP</span> <span class="mi">12493</span><span class="p">)]</span>
<span class="n">js</span><span class="o">&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mh">0x41414141</span><span class="p">,</span> <span class="mh">0x42424242</span><span class="p">,</span> <span class="mh">0x43434343</span><span class="p">]</span>
<span class="p">[</span><span class="mi">1094795585</span><span class="p">,</span> <span class="mi">1111638594</span><span class="p">,</span> <span class="mi">1128481603</span><span class="p">]</span>
<span class="n">js</span><span class="o">&gt;</span> <span class="n">a</span><span class="p">.</span><span class="n">length</span> <span class="o">=</span> <span class="mh">0xdeadbeef</span>
<span class="mi">3735928559</span>
<span class="n">js</span><span class="o">&gt;</span> <span class="n">Math</span><span class="p">.</span><span class="n">atan</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">Thread</span> <span class="mi">1</span> <span class="s">"js"</span> <span class="n">hit</span> <span class="n">Breakpoint</span> <span class="mi">1</span><span class="p">,</span> <span class="n">js</span><span class="o">::</span><span class="n">math_atan</span> <span class="p">(</span><span class="n">cx</span><span class="o">=</span><span class="mh">0x7ffff5b2a000</span><span class="p">,</span> <span class="n">argc</span><span class="o">=</span><span class="mh">0x1</span><span class="p">,</span> <span class="n">vp</span><span class="o">=</span><span class="mh">0x7ffff55e4098</span><span class="p">)</span> <span class="n">at</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">nonetype</span><span class="o">/</span><span class="n">hack</span><span class="o">/</span><span class="n">browser</span><span class="o">/</span><span class="n">firefox</span><span class="o">/</span><span class="n">firefox</span><span class="o">-</span><span class="mf">72.0</span><span class="o">/</span><span class="n">js</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">jsmath</span><span class="p">.</span><span class="n">cpp</span><span class="o">:</span><span class="mi">145</span>
<span class="mi">145</span>     <span class="kt">bool</span> <span class="n">js</span><span class="o">::</span><span class="n">math_atan</span><span class="p">(</span><span class="n">JSContext</span><span class="o">*</span> <span class="n">cx</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">argc</span><span class="p">,</span> <span class="n">Value</span><span class="o">*</span> <span class="n">vp</span><span class="p">)</span> <span class="p">{</span>
<span class="n">gef</span><span class="err">➤</span>  <span class="n">x</span><span class="o">/</span><span class="mi">8</span><span class="n">gx</span> <span class="n">vp</span>
<span class="mh">0x7ffff55e4098</span><span class="o">:</span> <span class="mh">0xfffe001ee1b8db80</span>      <span class="mh">0xfffe001ee1b71140</span>
<span class="mh">0x7ffff55e40a8</span><span class="o">:</span> <span class="mh">0xfffe001ee1b92040</span>      <span class="mh">0xfffb001ee1b4e820</span>
<span class="mh">0x7ffff55e40b8</span><span class="o">:</span> <span class="mh">0xfffa000000000000</span>      <span class="mh">0x0000000000000011</span>
<span class="mh">0x7ffff55e40c8</span><span class="o">:</span> <span class="mh">0x0000001ee1b3f0e0</span>      <span class="mh">0x0000001ee1b2f040</span>
<span class="n">gef</span><span class="err">➤</span>
</pre></table></code></div></div><p>인자로 전달된 array <code class="language-plaintext highlighter-rouge">a</code>의 객체 포인터는 <code class="language-plaintext highlighter-rouge">vp+0x10</code>위치에 존재한다.</p><p>여기서 특이한 점이, <code class="language-plaintext highlighter-rouge">vp+0x10</code> 위치에 존재하는 포인터, <code class="language-plaintext highlighter-rouge">0xfffe001ee1b92040</code>에서 타입 마스킹<sup id="fnref:type_masking" role="doc-noteref"><a href="#fn:type_masking" class="footnote" rel="footnote">1</a></sup>(여기서는 <code class="language-plaintext highlighter-rouge">0xfffe</code>, 다른 타입의 객체일 경우 값이 변화함)을 제거하기 위해 <code class="language-plaintext highlighter-rouge">&amp; 0x7fffffffffff</code> 연산을 실행하고, 연산의 결과값이 실제 해당 객체가 존재하는 메모리 주소이다.</p><p>gdb에서는 다음과 같이 간편하게 계산 가능하다.</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre><span class="n">gef</span><span class="err">➤</span>  <span class="n">x</span><span class="o">/</span><span class="mi">32</span><span class="n">gx</span> <span class="mh">0xfffe001ee1b92040</span> <span class="o">&amp;</span> <span class="mh">0x7fffffffffff</span>
<span class="mh">0x1ee1b92040</span><span class="o">:</span>   <span class="mh">0x0000001ee1b6b820</span>      <span class="mh">0x0000001ee1b7cbd8</span>
<span class="mh">0x1ee1b92050</span><span class="o">:</span>   <span class="mh">0x0000000000000000</span>      <span class="mh">0x0000001ee1b92070</span>
<span class="mh">0x1ee1b92060</span><span class="o">:</span>   <span class="mh">0x0000000300000000</span>      <span class="mh">0xdeadbeef00000006</span>
<span class="mh">0x1ee1b92070</span><span class="o">:</span>   <span class="mh">0xfff8800041414141</span>      <span class="mh">0xfff8800042424242</span>
<span class="mh">0x1ee1b92080</span><span class="o">:</span>   <span class="mh">0xfff8800043434343</span>      <span class="mh">0x0000000000000000</span>
<span class="mh">0x1ee1b92090</span><span class="o">:</span>   <span class="mh">0x0000000000000000</span>      <span class="mh">0x0000000000000000</span>
<span class="mh">0x1ee1b920a0</span><span class="o">:</span>   <span class="mh">0x0000000000000000</span>      <span class="mh">0x0000000000000000</span>
<span class="mh">0x1ee1b920b0</span><span class="o">:</span>   <span class="mh">0x0000000000000000</span>      <span class="mh">0x0000000000000000</span>
<span class="mh">0x1ee1b920c0</span><span class="o">:</span>   <span class="mh">0x0000000000000000</span>      <span class="mh">0x0000000000000000</span>
<span class="mh">0x1ee1b920d0</span><span class="o">:</span>   <span class="mh">0x0000000000000000</span>      <span class="mh">0x0000000000000000</span>
<span class="mh">0x1ee1b920e0</span><span class="o">:</span>   <span class="mh">0x0000000000000000</span>      <span class="mh">0x0000000000000000</span>
<span class="mh">0x1ee1b920f0</span><span class="o">:</span>   <span class="mh">0x0000000000000000</span>      <span class="mh">0x0000000000000000</span>
<span class="mh">0x1ee1b92100</span><span class="o">:</span>   <span class="mh">0x0000000000000000</span>      <span class="mh">0x0000000000000000</span>
<span class="mh">0x1ee1b92110</span><span class="o">:</span>   <span class="mh">0x0000000000000000</span>      <span class="mh">0x0000000000000000</span>
<span class="mh">0x1ee1b92120</span><span class="o">:</span>   <span class="mh">0x0000000000000000</span>      <span class="mh">0x0000000000000000</span>
<span class="mh">0x1ee1b92130</span><span class="o">:</span>   <span class="mh">0x0000000000000000</span>      <span class="mh">0x0000000000000000</span>
<span class="n">gef</span><span class="err">➤</span>
</pre></table></code></div></div><p>Array의 인자로 넣었던 <code class="language-plaintext highlighter-rouge">0x41414141</code>, <code class="language-plaintext highlighter-rouge">0x42424242</code>, <code class="language-plaintext highlighter-rouge">0x43434343</code>과 <code class="language-plaintext highlighter-rouge">array.length</code>로 설정했던 <code class="language-plaintext highlighter-rouge">0xdeadbeef</code>도 보인다.</p><p>배열 인자 값들도 객체 포인터와 동일하게 타입 마스킹 처리되어 앞에 <code class="language-plaintext highlighter-rouge">0xfff88</code>이 붙어있는 것을 확인할 수 있다.</p><h3 id="understand-type-masking">Understand Type Masking</h3><blockquote><p>Integer 형식의 변수로 보면 타입 마스킹 처리를 이해하기 편하다. 먼저, 다음과 같은 <code class="language-plaintext highlighter-rouge">setInt32()</code> 함수가 존재한다.</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="kt">void</span> <span class="nf">setInt32</span><span class="p">(</span><span class="kt">int32_t</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span>
 <span class="n">asBits_</span> <span class="o">=</span> <span class="n">bitsFromTagAndPayload</span><span class="p">(</span><span class="n">JSVAL_TAG_INT32</span><span class="p">,</span> <span class="kt">uint32_t</span><span class="p">(</span><span class="n">i</span><span class="p">));</span>
 <span class="n">MOZ_ASSERT</span><span class="p">(</span><span class="n">toInt32</span><span class="p">()</span> <span class="o">==</span> <span class="n">i</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><p>위 배열의 값을 예로 들면, 배열 인덱스에 값을 채울 때 <code class="language-plaintext highlighter-rouge">setInt32(0x41414141);</code>가 호출되고, 해당 함수 내에서 <code class="language-plaintext highlighter-rouge">bitsFromTagAndPayload</code> 함수가 호출된다.</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="k">static</span> <span class="k">constexpr</span> <span class="kt">uint64_t</span> <span class="nf">bitsFromTagAndPayload</span><span class="p">(</span><span class="n">JSValueTag</span> <span class="n">tag</span><span class="p">,</span>
                   <span class="n">PayloadType</span> <span class="n">payload</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span><span class="kt">uint64_t</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">JSVAL_TAG_SHIFT</span><span class="p">)</span> <span class="o">|</span> <span class="n">payload</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><p>결과적으로 <code class="language-plaintext highlighter-rouge">(uint64_t(JSVAL_TAG_INT32) &lt;&lt; JSVAL_TAG_SHIFT) | payload</code> 연산이 이루어지는데, 각 <code class="language-plaintext highlighter-rouge">JSVAL_TAG</code>는 다음과 같다.</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="cp">#if defined(JS_NUNBOX32)
#  define JSVAL_TAG_SHIFT 32 // if x86, 32
#elif defined(JS_PUNBOX64)
#  define JSVAL_TAG_SHIFT 47 // if x64, 47
#endif
</span></pre></table></code></div></div><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="n">JSVAL_TYPE_INT32</span> <span class="o">=</span> <span class="mh">0x01</span>
<span class="n">JSVAL_TAG_MAX_DOUBLE</span> <span class="o">=</span> <span class="mh">0x1FFF0</span>
<span class="n">JSVAL_TAG_INT32</span> <span class="o">=</span> <span class="n">JSVAL_TAG_MAX_DOUBLE</span> <span class="o">|</span> <span class="n">JSVAL_TYPE_INT32</span>
</pre></table></code></div></div><p>따라서 위 연산은 다음과 같다.</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">return</span> <span class="p">(</span> <span class="kt">uint64_t</span><span class="p">(</span><span class="mh">0x1FFF1</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mi">47</span> <span class="p">)</span> <span class="o">|</span> <span class="n">payload</span>
</pre></table></code></div></div><p>검증을 해보면 다음과 같다.</p><div class="language-py highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="nb">hex</span><span class="p">((</span><span class="mh">0x1FFF1</span> <span class="o">&lt;&lt;</span> <span class="mi">47</span><span class="p">)</span> <span class="o">|</span> <span class="mh">0x41414141</span><span class="p">)</span>
<span class="s">'0xfff8800041414141L'</span>
</pre></table></code></div></div><p>타입 마스킹 계산 정복!!</p></blockquote><h2 id="shape-debugging">Shape Debugging</h2><p>JSObject 관리는 properties와 shapes로 나누어 관리된다. (자세한 내용은 더 공부해봐야함) 여기서, 객체가 가지고 있는 속성을 표현하는 shapes를 디버깅하는 방법을 더듬더듬 짚어나가보자.</p><p>먼저 아래와 같은 코드를 작성해봤다.</p><p><strong>object.js</strong></p><div class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">x</span><span class="p">:</span> <span class="mh">0x41</span><span class="p">,</span>
        <span class="na">y</span><span class="p">:</span> <span class="mh">0x42</span>
<span class="p">};</span>
<span class="nb">Math</span><span class="p">.</span><span class="nx">atan</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>

<span class="nx">o</span><span class="p">.</span><span class="nx">z</span> <span class="o">=</span> <span class="mh">0x43</span><span class="p">;</span>
<span class="nb">Math</span><span class="p">.</span><span class="nx">atan</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>

<span class="nx">o</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x1337</span><span class="p">;</span>
<span class="nx">o</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x1338</span><span class="p">;</span>
<span class="nb">Math</span><span class="p">.</span><span class="nx">atan</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>

<span class="nx">o</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="mh">0x44</span><span class="p">;</span>
<span class="nb">Math</span><span class="p">.</span><span class="nx">atan</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>
</pre></table></code></div></div><p>이후 아래와 같이 디버깅을 진행한다.</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
</pre><td class="rouge-code"><pre><span class="n">nonetype</span><span class="err">@</span><span class="n">box</span><span class="o">:~/</span><span class="n">hack</span><span class="o">/</span><span class="n">browser</span><span class="o">/</span><span class="n">firefox</span><span class="o">/</span><span class="n">CVE</span><span class="o">-</span><span class="mi">2019</span><span class="o">-</span><span class="mi">9791</span><span class="o">/</span><span class="n">gecko</span><span class="o">-</span><span class="n">release</span><span class="o">/</span><span class="n">dist</span><span class="o">/</span><span class="n">bin</span><span class="err">$</span> <span class="n">lldb</span> <span class="nf">js</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span> <span class="n">target</span> <span class="n">create</span> <span class="s">"js"</span>
<span class="n">Current</span> <span class="n">executable</span> <span class="n">set</span> <span class="n">to</span> <span class="err">'</span><span class="n">js</span><span class="err">'</span> <span class="p">(</span><span class="n">x86_64</span><span class="p">).</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span> <span class="n">b</span> <span class="n">js</span><span class="o">::</span><span class="n">math_atan</span>
<span class="n">Breakpoint</span> <span class="mi">1</span><span class="o">:</span> <span class="n">where</span> <span class="o">=</span> <span class="n">js</span><span class="err">`</span><span class="n">js</span><span class="o">::</span><span class="n">math_atan</span><span class="p">(</span><span class="n">JSContext</span><span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span><span class="p">,</span> <span class="n">JS</span><span class="o">::</span><span class="n">Value</span><span class="o">*</span><span class="p">)</span> <span class="o">+</span> <span class="mi">9</span> <span class="p">[</span><span class="n">inlined</span><span class="p">]</span> <span class="kt">bool</span> <span class="n">math_function</span><span class="o">&lt;&amp;</span><span class="p">(</span><span class="n">js</span><span class="o">::</span><span class="n">math_atan_impl</span><span class="p">(</span><span class="kt">double</span><span class="p">))</span><span class="o">&gt;</span><span class="p">(</span><span class="n">JSContext</span><span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span><span class="p">,</span> <span class="n">JS</span><span class="o">::</span><span class="n">Value</span><span class="o">*</span><span class="p">)</span> <span class="n">at</span> <span class="n">jsmath</span><span class="p">.</span><span class="n">cpp</span><span class="o">:</span><span class="mi">149</span><span class="p">,</span> <span class="n">address</span> <span class="o">=</span> <span class="mh">0x0000000000bebae9</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span> <span class="n">r</span> <span class="n">object</span><span class="p">.</span><span class="n">js</span>
<span class="n">Process</span> <span class="mi">5798</span> <span class="n">launched</span><span class="o">:</span> <span class="err">'</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">nonetype</span><span class="o">/</span><span class="n">hack</span><span class="o">/</span><span class="n">browser</span><span class="o">/</span><span class="n">firefox</span><span class="o">/</span><span class="n">CVE</span><span class="o">-</span><span class="mi">2019</span><span class="o">-</span><span class="mi">9791</span><span class="o">/</span><span class="n">gecko</span><span class="o">-</span><span class="n">release</span><span class="o">/</span><span class="n">dist</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">js</span><span class="err">'</span> <span class="p">(</span><span class="n">x86_64</span><span class="p">)</span>
<span class="n">Process</span> <span class="mi">5798</span> <span class="n">stopped</span>
<span class="o">*</span> <span class="kr">thread</span> <span class="err">#</span><span class="mi">1</span><span class="p">,</span> <span class="n">name</span> <span class="o">=</span> <span class="err">'</span><span class="n">js</span><span class="err">'</span><span class="p">,</span> <span class="n">stop</span> <span class="n">reason</span> <span class="o">=</span> <span class="n">breakpoint</span> <span class="mf">1.1</span>
    <span class="n">frame</span> <span class="err">#</span><span class="mi">0</span><span class="o">:</span> <span class="mh">0x000055555613fae9</span> <span class="n">js</span><span class="err">`</span><span class="n">js</span><span class="o">::</span><span class="n">math_atan</span><span class="p">(</span><span class="n">JSContext</span><span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span><span class="p">,</span> <span class="n">JS</span><span class="o">::</span><span class="n">Value</span><span class="o">*</span><span class="p">)</span> <span class="p">[</span><span class="n">inlined</span><span class="p">]</span> <span class="kt">bool</span> <span class="n">math_function</span><span class="o">&lt;&amp;</span><span class="p">(</span><span class="n">js</span><span class="o">::</span><span class="n">math_atan_impl</span><span class="p">(</span><span class="kt">double</span><span class="p">))</span><span class="o">&gt;</span><span class="p">(</span><span class="n">cx</span><span class="o">=</span><span class="mh">0x00007ffff5b16000</span><span class="p">,</span> <span class="n">argc</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">vp</span><span class="o">=</span><span class="mh">0x00007ffff56f60a0</span><span class="p">)</span> <span class="n">at</span> <span class="n">jsmath</span><span class="p">.</span><span class="n">cpp</span><span class="o">:</span><span class="mi">90</span>
   <span class="mi">87</span>   <span class="k">template</span> <span class="o">&lt;</span><span class="n">UnaryMathFunctionType</span> <span class="n">F</span><span class="p">&gt;</span>
   <span class="mi">88</span>   <span class="k">static</span> <span class="kt">bool</span> <span class="n">math_function</span><span class="p">(</span><span class="n">JSContext</span><span class="o">*</span> <span class="n">cx</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">argc</span><span class="p">,</span> <span class="n">Value</span><span class="o">*</span> <span class="n">vp</span><span class="p">)</span> <span class="p">{</span>
   <span class="mi">89</span>     <span class="n">CallArgs</span> <span class="n">args</span> <span class="o">=</span> <span class="n">CallArgsFromVp</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">vp</span><span class="p">);</span>
<span class="o">-&gt;</span> <span class="mi">90</span>     <span class="k">if</span> <span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
   <span class="mi">91</span>       <span class="n">args</span><span class="p">.</span><span class="n">rval</span><span class="p">().</span><span class="n">setNaN</span><span class="p">();</span>
   <span class="mi">92</span>       <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
   <span class="mi">93</span>     <span class="p">}</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span> <span class="n">x</span><span class="o">/</span><span class="mi">3</span><span class="n">gx</span> <span class="n">vp</span>
<span class="mh">0x7ffff56f60a0</span><span class="o">:</span> <span class="mh">0xfffe00aee62aa4c0</span> <span class="mh">0xfffe00aee6283180</span>
<span class="mh">0x7ffff56f60b0</span><span class="o">:</span> <span class="mh">0xfffe00aee62811c0</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span> <span class="n">p</span> <span class="o">*</span><span class="p">(</span><span class="n">JSObject</span><span class="o">*</span><span class="p">)</span><span class="mh">0x00aee62811c0</span>
<span class="p">(</span><span class="n">JSObject</span><span class="p">)</span> <span class="err">$</span><span class="mi">1</span> <span class="o">=</span> <span class="p">{</span>
  <span class="n">group_</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">js</span><span class="o">::</span><span class="n">WriteBarrieredBase</span><span class="o">&lt;</span><span class="n">js</span><span class="o">::</span><span class="n">ObjectGroup</span> <span class="o">*&gt;</span> <span class="o">=</span> <span class="p">{</span>
      <span class="n">js</span><span class="o">::</span><span class="n">BarrieredBase</span><span class="o">&lt;</span><span class="n">js</span><span class="o">::</span><span class="n">ObjectGroup</span> <span class="o">*&gt;</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">value</span> <span class="o">=</span> <span class="mh">0x000000aee627d2b0</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="n">shapeOrExpando_</span> <span class="o">=</span> <span class="mh">0x000000aee62ab0b0</span>
<span class="p">}</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span> <span class="n">p</span> <span class="o">*</span><span class="p">(</span><span class="n">Shape</span><span class="o">*</span><span class="p">)</span><span class="err">$</span><span class="mf">1.</span><span class="n">shapeOrExpando_</span>
<span class="p">(</span><span class="n">js</span><span class="o">::</span><span class="n">Shape</span><span class="p">)</span> <span class="err">$</span><span class="mi">2</span> <span class="o">=</span> <span class="p">{</span>
  <span class="n">base_</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">js</span><span class="o">::</span><span class="n">WriteBarrieredBase</span><span class="o">&lt;</span><span class="n">js</span><span class="o">::</span><span class="n">BaseShape</span> <span class="o">*&gt;</span> <span class="o">=</span> <span class="p">{</span>
      <span class="n">js</span><span class="o">::</span><span class="n">BarrieredBase</span><span class="o">&lt;</span><span class="n">js</span><span class="o">::</span><span class="n">BaseShape</span> <span class="o">*&gt;</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">value</span> <span class="o">=</span> <span class="mh">0x000000aee627e0e0</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="n">propid_</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">js</span><span class="o">::</span><span class="n">WriteBarrieredBase</span><span class="o">&lt;</span><span class="n">JS</span><span class="o">::</span><span class="n">PropertyKey</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">{</span>
      <span class="n">js</span><span class="o">::</span><span class="n">BarrieredBase</span><span class="o">&lt;</span><span class="n">JS</span><span class="o">::</span><span class="n">PropertyKey</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">value</span> <span class="o">=</span> <span class="p">(</span><span class="n">asBits</span> <span class="o">=</span> <span class="mi">751185170272</span><span class="p">)</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="n">immutableFlags</span> <span class="o">=</span> <span class="mi">33554433</span>
  <span class="n">attrs</span> <span class="o">=</span> <span class="sc">'\x01'</span>
  <span class="n">mutableFlags</span> <span class="o">=</span> <span class="sc">'\0'</span>
  <span class="n">parent</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">js</span><span class="o">::</span><span class="n">WriteBarrieredBase</span><span class="o">&lt;</span><span class="n">js</span><span class="o">::</span><span class="n">Shape</span> <span class="o">*&gt;</span> <span class="o">=</span> <span class="p">{</span>
      <span class="n">js</span><span class="o">::</span><span class="n">BarrieredBase</span><span class="o">&lt;</span><span class="n">js</span><span class="o">::</span><span class="n">Shape</span> <span class="o">*&gt;</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">value</span> <span class="o">=</span> <span class="mh">0x000000aee62ab088</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
   <span class="o">=</span> <span class="p">{</span>
    <span class="n">kids</span> <span class="o">=</span> <span class="p">(</span><span class="n">w</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">listp</span> <span class="o">=</span> <span class="mh">0x0000000000000000</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span> <span class="n">p</span> <span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span> <span class="p">((</span><span class="n">JSString</span><span class="o">*</span><span class="p">)</span><span class="err">$</span><span class="mf">2.</span><span class="n">propid_</span><span class="p">.</span><span class="n">value</span><span class="p">.</span><span class="n">asBits</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">d</span><span class="p">.</span><span class="n">inlineStorageLatin1</span>
<span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span> <span class="err">$</span><span class="mi">3</span> <span class="o">=</span> <span class="mh">0x000000aee6200f68</span> <span class="s">"y"</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span>
</pre></table></code></div></div><p>객체의 인라인 캐시에 저장된 변수 y가 <code class="language-plaintext highlighter-rouge">JSString</code> 형식으로 저장된 것을 확인할 수 있다. 이어서 변수 x도 따라가보자.</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="p">(</span><span class="n">lldb</span><span class="p">)</span> <span class="n">p</span> <span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span> <span class="p">((</span><span class="n">JSString</span><span class="o">*</span><span class="p">)</span><span class="err">$</span><span class="mf">2.</span><span class="n">parent</span><span class="p">.</span><span class="n">value</span><span class="o">-&gt;</span><span class="n">propid_</span><span class="p">.</span><span class="n">value</span><span class="p">.</span><span class="n">asBits</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">d</span><span class="p">.</span><span class="n">inlineStorageLatin1</span>
<span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span> <span class="err">$</span><span class="mi">6</span> <span class="o">=</span> <span class="mh">0x000000aee6200f48</span> <span class="s">"x"</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span>
</pre></table></code></div></div><p>이렇게 객체의 shape에 존재하는 변수명을 확인할 수 있다.</p><h2 id="whats-0xe5e5e5e5e5e5e5e5-">What’s 0xe5e5e5e5e5e5e5e5 ???</h2><p>디버깅을 하다가 알 수 없는 값을 볼 수 있었다.</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre><span class="p">(</span><span class="n">lldb</span><span class="p">)</span> <span class="n">p</span> <span class="o">*</span><span class="p">(</span><span class="n">NativeObject</span><span class="o">*</span><span class="p">)</span><span class="mh">0x00aee62811c0</span>
<span class="p">(</span><span class="n">js</span><span class="o">::</span><span class="n">NativeObject</span><span class="p">)</span> <span class="err">$</span><span class="mi">8</span> <span class="o">=</span> <span class="p">{</span>
  <span class="n">js</span><span class="o">::</span><span class="n">ShapedObject</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">JSObject</span> <span class="o">=</span> <span class="p">{</span>
      <span class="n">group_</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">js</span><span class="o">::</span><span class="n">WriteBarrieredBase</span><span class="o">&lt;</span><span class="n">js</span><span class="o">::</span><span class="n">ObjectGroup</span> <span class="o">*&gt;</span> <span class="o">=</span> <span class="p">{</span>
          <span class="n">js</span><span class="o">::</span><span class="n">BarrieredBase</span><span class="o">&lt;</span><span class="n">js</span><span class="o">::</span><span class="n">ObjectGroup</span> <span class="o">*&gt;</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">value</span> <span class="o">=</span> <span class="mh">0x000000aee627d2b0</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="n">shapeOrExpando_</span> <span class="o">=</span> <span class="mh">0x000000aee62ab8a8</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="n">slots_</span> <span class="o">=</span> <span class="mh">0x00007ffff54db8c0</span>
  <span class="n">elements_</span> <span class="o">=</span> <span class="mh">0x000055555656c708</span>
<span class="p">}</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span> <span class="n">x</span><span class="o">/</span><span class="mi">4</span><span class="n">gx</span> <span class="mh">0x00007ffff54db8c0</span>
<span class="mh">0x7ffff54db8c0</span><span class="o">:</span> <span class="mh">0xfff8800000000043</span> <span class="mh">0xe5e5e5e5e5e5e5e5</span>
<span class="mh">0x7ffff54db8d0</span><span class="o">:</span> <span class="mh">0xe5e5e5e5e5e5e5e5</span> <span class="mh">0xe5e5e5e5e5e5e5e5</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">0x7ffff54db8c0</code> 위치의 0x43은 내가 넣은 값인데, 그 뒤에 존재하는 알 수 없는 <code class="language-plaintext highlighter-rouge">0xe5e5e5e5e5e5e5e5</code> 값들이 반복되고 있어서 구글링을 해봤다.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://i.imgur.com/V94KCvb.jpg" alt="1" /></p><p>bugzilla 사이트에선 별 정보를 얻지 못했는데, <a href="https://mozilla.logbot.info/jsapi/20171016">첫번째 링크</a>에서 정보를 얻었다.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>03:40 pbone: Good afternoon.
04:31 pbone: 0xe5e5e5e5e5e5e5e5
04:31 pbone: I know there's a bot here I can ask about that.
04:31 pbone: mrgiggles: can you help me?
07:08 evilpie: firebot: literal 0xe5
07:08 mrgiggles: evilpie: 0xe5 is jemalloc freed memory
07:08 mrgiggles: evilpie: if you're seeing a crash with this pattern, you have a use-after-free on your hands
07:08 mrgiggles: evilpie: and you'd better fix it. They tend to be security bugs!
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">jemalloc</code>에서 할당 해제된 청크 내의 값은 0xe5 패턴으로 채워지는 것 같다.</p><h2 id="object-storages">Object storages</h2><p>object에는 크게 3가지의 저장소가 존재하는 듯 하다.</p><ol><li>Inline storage(Inline properties)<li>Out-of-line storage(Out-of-line properties)<li>Elements</ol><p><strong>object.js</strong></p><div class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">x</span><span class="p">:</span> <span class="mh">0x41</span><span class="p">,</span> <span class="c1">// 1. Inline properties</span>
        <span class="na">y</span><span class="p">:</span> <span class="mh">0x42</span>
<span class="p">};</span>
<span class="nb">Math</span><span class="p">.</span><span class="nx">atan</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>

<span class="nx">o</span><span class="p">.</span><span class="nx">z</span> <span class="o">=</span> <span class="mh">0x43</span><span class="p">;</span> <span class="c1">// 2. Out-of-line properties</span>
<span class="nb">Math</span><span class="p">.</span><span class="nx">atan</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>

<span class="nx">o</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x1337</span><span class="p">;</span> <span class="c1">// 3. Elements</span>
<span class="nx">o</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x1338</span><span class="p">;</span>
<span class="nb">Math</span><span class="p">.</span><span class="nx">atan</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>

<span class="nx">o</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="mh">0x44</span><span class="p">;</span>
<span class="nb">Math</span><span class="p">.</span><span class="nx">atan</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>
</pre></table></code></div></div><p>디버깅을 통해 각각의 값들이 어디에 저장되는지 살펴보자.</p><h3 id="inline-properties">Inline properties</h3><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
</pre><td class="rouge-code"><pre><span class="n">nonetype</span><span class="err">@</span><span class="n">box</span><span class="o">:~/</span><span class="n">hack</span><span class="o">/</span><span class="n">browser</span><span class="o">/</span><span class="n">firefox</span><span class="o">/</span><span class="n">CVE</span><span class="o">-</span><span class="mi">2019</span><span class="o">-</span><span class="mi">9791</span><span class="o">/</span><span class="n">gecko</span><span class="o">-</span><span class="n">release</span><span class="o">/</span><span class="n">dist</span><span class="o">/</span><span class="n">bin</span><span class="err">$</span> <span class="n">lldb</span> <span class="nf">js</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span> <span class="n">target</span> <span class="n">create</span> <span class="s">"js"</span>
<span class="n">Current</span> <span class="n">executable</span> <span class="n">set</span> <span class="n">to</span> <span class="err">'</span><span class="n">js</span><span class="err">'</span> <span class="p">(</span><span class="n">x86_64</span><span class="p">).</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span> <span class="n">b</span> <span class="n">js</span><span class="o">::</span><span class="n">math_atan</span>
<span class="n">Breakpoint</span> <span class="mi">1</span><span class="o">:</span> <span class="n">where</span> <span class="o">=</span> <span class="n">js</span><span class="err">`</span><span class="n">js</span><span class="o">::</span><span class="n">math_atan</span><span class="p">(</span><span class="n">JSContext</span><span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span><span class="p">,</span> <span class="n">JS</span><span class="o">::</span><span class="n">Value</span><span class="o">*</span><span class="p">)</span> <span class="o">+</span> <span class="mi">9</span> <span class="p">[</span><span class="n">inlined</span><span class="p">]</span> <span class="kt">bool</span> <span class="n">math_function</span><span class="o">&lt;&amp;</span><span class="p">(</span><span class="n">js</span><span class="o">::</span><span class="n">math_atan_impl</span><span class="p">(</span><span class="kt">double</span><span class="p">))</span><span class="o">&gt;</span><span class="p">(</span><span class="n">JSContext</span><span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span><span class="p">,</span> <span class="n">JS</span><span class="o">::</span><span class="n">Value</span><span class="o">*</span><span class="p">)</span> <span class="n">at</span> <span class="n">jsmath</span><span class="p">.</span><span class="n">cpp</span><span class="o">:</span><span class="mi">149</span><span class="p">,</span> <span class="n">address</span> <span class="o">=</span> <span class="mh">0x0000000000bebae9</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span> <span class="n">r</span> <span class="n">object</span><span class="p">.</span><span class="n">js</span>
<span class="n">Process</span> <span class="mi">7025</span> <span class="n">launched</span><span class="o">:</span> <span class="err">'</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">nonetype</span><span class="o">/</span><span class="n">hack</span><span class="o">/</span><span class="n">browser</span><span class="o">/</span><span class="n">firefox</span><span class="o">/</span><span class="n">CVE</span><span class="o">-</span><span class="mi">2019</span><span class="o">-</span><span class="mi">9791</span><span class="o">/</span><span class="n">gecko</span><span class="o">-</span><span class="n">release</span><span class="o">/</span><span class="n">dist</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">js</span><span class="err">'</span> <span class="p">(</span><span class="n">x86_64</span><span class="p">)</span>
<span class="n">Process</span> <span class="mi">7025</span> <span class="n">stopped</span>
<span class="o">*</span> <span class="kr">thread</span> <span class="err">#</span><span class="mi">1</span><span class="p">,</span> <span class="n">name</span> <span class="o">=</span> <span class="err">'</span><span class="n">js</span><span class="err">'</span><span class="p">,</span> <span class="n">stop</span> <span class="n">reason</span> <span class="o">=</span> <span class="n">breakpoint</span> <span class="mf">1.1</span>
    <span class="n">frame</span> <span class="err">#</span><span class="mi">0</span><span class="o">:</span> <span class="mh">0x000055555613fae9</span> <span class="n">js</span><span class="err">`</span><span class="n">js</span><span class="o">::</span><span class="n">math_atan</span><span class="p">(</span><span class="n">JSContext</span><span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span><span class="p">,</span> <span class="n">JS</span><span class="o">::</span><span class="n">Value</span><span class="o">*</span><span class="p">)</span> <span class="p">[</span><span class="n">inlined</span><span class="p">]</span> <span class="kt">bool</span> <span class="n">math_function</span><span class="o">&lt;&amp;</span><span class="p">(</span><span class="n">js</span><span class="o">::</span><span class="n">math_atan_impl</span><span class="p">(</span><span class="kt">double</span><span class="p">))</span><span class="o">&gt;</span><span class="p">(</span><span class="n">cx</span><span class="o">=</span><span class="mh">0x00007ffff5b16000</span><span class="p">,</span> <span class="n">argc</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">vp</span><span class="o">=</span><span class="mh">0x00007ffff56f60a0</span><span class="p">)</span> <span class="n">at</span> <span class="n">jsmath</span><span class="p">.</span><span class="n">cpp</span><span class="o">:</span><span class="mi">90</span>
   <span class="mi">87</span>   <span class="k">template</span> <span class="o">&lt;</span><span class="n">UnaryMathFunctionType</span> <span class="n">F</span><span class="p">&gt;</span>
   <span class="mi">88</span>   <span class="k">static</span> <span class="kt">bool</span> <span class="n">math_function</span><span class="p">(</span><span class="n">JSContext</span><span class="o">*</span> <span class="n">cx</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">argc</span><span class="p">,</span> <span class="n">Value</span><span class="o">*</span> <span class="n">vp</span><span class="p">)</span> <span class="p">{</span>
   <span class="mi">89</span>     <span class="n">CallArgs</span> <span class="n">args</span> <span class="o">=</span> <span class="n">CallArgsFromVp</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">vp</span><span class="p">);</span>
<span class="o">-&gt;</span> <span class="mi">90</span>     <span class="k">if</span> <span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
   <span class="mi">91</span>       <span class="n">args</span><span class="p">.</span><span class="n">rval</span><span class="p">().</span><span class="n">setNaN</span><span class="p">();</span>
   <span class="mi">92</span>       <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
   <span class="mi">93</span>     <span class="p">}</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span> <span class="n">x</span><span class="o">/</span><span class="mi">3</span><span class="n">gx</span> <span class="n">vp</span>
<span class="mh">0x7ffff56f60a0</span><span class="o">:</span> <span class="mh">0xfffe3d5accfaa4c0</span> <span class="mh">0xfffe3d5accf83180</span>
<span class="mh">0x7ffff56f60b0</span><span class="o">:</span> <span class="mh">0xfffe3d5accf811c0</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span> <span class="n">p</span> <span class="o">*</span><span class="p">(</span><span class="n">NativeObject</span><span class="o">*</span><span class="p">)</span><span class="mh">0x3d5accf811c0</span>
<span class="p">(</span><span class="n">js</span><span class="o">::</span><span class="n">NativeObject</span><span class="p">)</span> <span class="err">$</span><span class="mi">1</span> <span class="o">=</span> <span class="p">{</span>
  <span class="n">js</span><span class="o">::</span><span class="n">ShapedObject</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">JSObject</span> <span class="o">=</span> <span class="p">{</span>
      <span class="n">group_</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">js</span><span class="o">::</span><span class="n">WriteBarrieredBase</span><span class="o">&lt;</span><span class="n">js</span><span class="o">::</span><span class="n">ObjectGroup</span> <span class="o">*&gt;</span> <span class="o">=</span> <span class="p">{</span>
          <span class="n">js</span><span class="o">::</span><span class="n">BarrieredBase</span><span class="o">&lt;</span><span class="n">js</span><span class="o">::</span><span class="n">ObjectGroup</span> <span class="o">*&gt;</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">value</span> <span class="o">=</span> <span class="mh">0x00003d5accf7d2b0</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="n">shapeOrExpando_</span> <span class="o">=</span> <span class="mh">0x00003d5accfab0b0</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="n">slots_</span> <span class="o">=</span> <span class="mh">0x0000000000000000</span>
  <span class="n">elements_</span> <span class="o">=</span> <span class="mh">0x000055555656c708</span>
<span class="p">}</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span> <span class="n">x</span><span class="o">/</span><span class="mi">8</span><span class="n">gx</span> <span class="mh">0x3d5accf811c0</span>
<span class="mh">0x3d5accf811c0</span><span class="o">:</span> <span class="mh">0x00003d5accf7d2b0</span> <span class="mh">0x00003d5accfab0b0</span>
<span class="mh">0x3d5accf811d0</span><span class="o">:</span> <span class="mh">0x0000000000000000</span> <span class="mh">0x000055555656c708</span>
<span class="mh">0x3d5accf811e0</span><span class="o">:</span> <span class="mh">0xfff8800000000041</span> <span class="mh">0xfff8800000000042</span> <span class="c1">// Inline properties HERE!</span>
<span class="mh">0x3d5accf811f0</span><span class="o">:</span> <span class="mh">0x0000000000000000</span> <span class="mh">0x0000000000000000</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span>
</pre></table></code></div></div><p>객체 생성과 동시에 선언되기 때문에 객체의 Shape 포인터 밑에 값이 존재한다.</p><h3 id="out-of-line-properties">Out-of-line properties</h3><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre><td class="rouge-code"><pre><span class="p">(</span><span class="n">lldb</span><span class="p">)</span> <span class="n">c</span>
<span class="n">Process</span> <span class="mi">7025</span> <span class="n">resuming</span>
<span class="n">Process</span> <span class="mi">7025</span> <span class="n">stopped</span>
<span class="o">*</span> <span class="kr">thread</span> <span class="err">#</span><span class="mi">1</span><span class="p">,</span> <span class="n">name</span> <span class="o">=</span> <span class="err">'</span><span class="n">js</span><span class="err">'</span><span class="p">,</span> <span class="n">stop</span> <span class="n">reason</span> <span class="o">=</span> <span class="n">breakpoint</span> <span class="mf">1.1</span>
    <span class="n">frame</span> <span class="err">#</span><span class="mi">0</span><span class="o">:</span> <span class="mh">0x000055555613fae9</span> <span class="n">js</span><span class="err">`</span><span class="n">js</span><span class="o">::</span><span class="n">math_atan</span><span class="p">(</span><span class="n">JSContext</span><span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span><span class="p">,</span> <span class="n">JS</span><span class="o">::</span><span class="n">Value</span><span class="o">*</span><span class="p">)</span> <span class="p">[</span><span class="n">inlined</span><span class="p">]</span> <span class="kt">bool</span> <span class="n">math_function</span><span class="o">&lt;&amp;</span><span class="p">(</span><span class="n">js</span><span class="o">::</span><span class="n">math_atan_impl</span><span class="p">(</span><span class="kt">double</span><span class="p">))</span><span class="o">&gt;</span><span class="p">(</span><span class="n">cx</span><span class="o">=</span><span class="mh">0x00007ffff5b16000</span><span class="p">,</span> <span class="n">argc</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">vp</span><span class="o">=</span><span class="mh">0x00007ffff56f60a0</span><span class="p">)</span> <span class="n">at</span> <span class="n">jsmath</span><span class="p">.</span><span class="n">cpp</span><span class="o">:</span><span class="mi">90</span>
   <span class="mi">87</span>   <span class="k">template</span> <span class="o">&lt;</span><span class="n">UnaryMathFunctionType</span> <span class="n">F</span><span class="p">&gt;</span>
   <span class="mi">88</span>   <span class="k">static</span> <span class="kt">bool</span> <span class="nf">math_function</span><span class="p">(</span><span class="n">JSContext</span><span class="o">*</span> <span class="n">cx</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">argc</span><span class="p">,</span> <span class="n">Value</span><span class="o">*</span> <span class="n">vp</span><span class="p">)</span> <span class="p">{</span>
   <span class="mi">89</span>     <span class="n">CallArgs</span> <span class="n">args</span> <span class="o">=</span> <span class="n">CallArgsFromVp</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">vp</span><span class="p">);</span>
<span class="o">-&gt;</span> <span class="mi">90</span>     <span class="k">if</span> <span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
   <span class="mi">91</span>       <span class="n">args</span><span class="p">.</span><span class="n">rval</span><span class="p">().</span><span class="n">setNaN</span><span class="p">();</span>
   <span class="mi">92</span>       <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
   <span class="mi">93</span>     <span class="p">}</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span> <span class="n">p</span> <span class="o">*</span><span class="err">$</span><span class="mf">1.</span><span class="n">slots_</span>
<span class="p">(</span><span class="n">js</span><span class="o">::</span><span class="n">HeapSlot</span><span class="p">)</span> <span class="err">$</span><span class="mi">2</span> <span class="o">=</span> <span class="p">{</span>
  <span class="n">js</span><span class="o">::</span><span class="n">WriteBarrieredBase</span><span class="o">&lt;</span><span class="n">JS</span><span class="o">::</span><span class="n">Value</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">js</span><span class="o">::</span><span class="n">BarrieredBase</span><span class="o">&lt;</span><span class="n">JS</span><span class="o">::</span><span class="n">Value</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">{</span>
      <span class="n">value</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">asBits_</span> <span class="o">=</span> <span class="mi">18444633011384221763</span>
        <span class="n">asDouble_</span> <span class="o">=</span> <span class="n">NaN</span>
        <span class="n">debugView_</span> <span class="o">=</span> <span class="p">(</span><span class="n">payload47_</span> <span class="o">=</span> <span class="mi">67</span><span class="p">,</span> <span class="n">tag_</span> <span class="o">=</span> <span class="n">JSVAL_TAG_INT32</span><span class="p">)</span>
        <span class="n">s_</span> <span class="o">=</span> <span class="p">{</span>
          <span class="n">payload_</span> <span class="o">=</span> <span class="p">(</span><span class="n">i32_</span> <span class="o">=</span> <span class="mi">67</span><span class="p">,</span> <span class="n">u32_</span> <span class="o">=</span> <span class="mi">67</span><span class="p">,</span> <span class="n">why_</span> <span class="o">=</span> <span class="mi">67</span><span class="p">)</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span> <span class="n">p</span> <span class="err">$</span><span class="mf">1.</span><span class="n">slots_</span>
<span class="p">(</span><span class="n">js</span><span class="o">::</span><span class="n">HeapSlot</span> <span class="o">*</span><span class="p">)</span> <span class="err">$</span><span class="mi">3</span> <span class="o">=</span> <span class="mh">0x00007ffff54db8c0</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span> <span class="n">x</span><span class="o">/</span><span class="mi">8</span><span class="n">gx</span> <span class="mh">0x00007ffff54db8c0</span>
<span class="mh">0x7ffff54db8c0</span><span class="o">:</span> <span class="mh">0xfff8800000000043</span> <span class="mh">0xe5e5e5e5e5e5e5e5</span> <span class="c1">// Out-of-line properties HERE!</span>
<span class="mh">0x7ffff54db8d0</span><span class="o">:</span> <span class="mh">0xe5e5e5e5e5e5e5e5</span> <span class="mh">0xe5e5e5e5e5e5e5e5</span>
<span class="mh">0x7ffff54db8e0</span><span class="o">:</span> <span class="mh">0xe5e5e5e5e5e5e5e5</span> <span class="mh">0xe5e5e5e5e5e5e5e5</span>
<span class="mh">0x7ffff54db8f0</span><span class="o">:</span> <span class="mh">0xe5e5e5e5e5e5e5e5</span> <span class="mh">0xe5e5e5e5e5e5e5e5</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span>
</pre></table></code></div></div><h3 id="elements">Elements</h3><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="p">(</span><span class="n">lldb</span><span class="p">)</span> <span class="n">c</span>
<span class="n">Process</span> <span class="mi">7025</span> <span class="n">resuming</span>
<span class="n">Process</span> <span class="mi">7025</span> <span class="n">stopped</span>
<span class="o">*</span> <span class="kr">thread</span> <span class="err">#</span><span class="mi">1</span><span class="p">,</span> <span class="n">name</span> <span class="o">=</span> <span class="err">'</span><span class="n">js</span><span class="err">'</span><span class="p">,</span> <span class="n">stop</span> <span class="n">reason</span> <span class="o">=</span> <span class="n">breakpoint</span> <span class="mf">1.1</span>
    <span class="n">frame</span> <span class="err">#</span><span class="mi">0</span><span class="o">:</span> <span class="mh">0x000055555613fae9</span> <span class="n">js</span><span class="err">`</span><span class="n">js</span><span class="o">::</span><span class="n">math_atan</span><span class="p">(</span><span class="n">JSContext</span><span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span><span class="p">,</span> <span class="n">JS</span><span class="o">::</span><span class="n">Value</span><span class="o">*</span><span class="p">)</span> <span class="p">[</span><span class="n">inlined</span><span class="p">]</span> <span class="kt">bool</span> <span class="n">math_function</span><span class="o">&lt;&amp;</span><span class="p">(</span><span class="n">js</span><span class="o">::</span><span class="n">math_atan_impl</span><span class="p">(</span><span class="kt">double</span><span class="p">))</span><span class="o">&gt;</span><span class="p">(</span><span class="n">cx</span><span class="o">=</span><span class="mh">0x00007ffff5b16000</span><span class="p">,</span> <span class="n">argc</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">vp</span><span class="o">=</span><span class="mh">0x00007ffff56f60a0</span><span class="p">)</span> <span class="n">at</span> <span class="n">jsmath</span><span class="p">.</span><span class="n">cpp</span><span class="o">:</span><span class="mi">90</span>
   <span class="mi">87</span>   <span class="k">template</span> <span class="o">&lt;</span><span class="n">UnaryMathFunctionType</span> <span class="n">F</span><span class="p">&gt;</span>
   <span class="mi">88</span>   <span class="k">static</span> <span class="kt">bool</span> <span class="nf">math_function</span><span class="p">(</span><span class="n">JSContext</span><span class="o">*</span> <span class="n">cx</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">argc</span><span class="p">,</span> <span class="n">Value</span><span class="o">*</span> <span class="n">vp</span><span class="p">)</span> <span class="p">{</span>
   <span class="mi">89</span>     <span class="n">CallArgs</span> <span class="n">args</span> <span class="o">=</span> <span class="n">CallArgsFromVp</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">vp</span><span class="p">);</span>
<span class="o">-&gt;</span> <span class="mi">90</span>     <span class="k">if</span> <span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
   <span class="mi">91</span>       <span class="n">args</span><span class="p">.</span><span class="n">rval</span><span class="p">().</span><span class="n">setNaN</span><span class="p">();</span>
   <span class="mi">92</span>       <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
   <span class="mi">93</span>     <span class="p">}</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span> <span class="n">p</span> <span class="err">$</span><span class="mf">1.</span><span class="n">elements_</span>
<span class="p">(</span><span class="n">js</span><span class="o">::</span><span class="n">HeapSlot</span> <span class="o">*</span><span class="p">)</span> <span class="err">$</span><span class="mi">4</span> <span class="o">=</span> <span class="mh">0x00007ffff54db910</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span> <span class="n">x</span><span class="o">/</span><span class="mi">8</span><span class="n">gx</span> <span class="mh">0x00007ffff54db910</span>
<span class="mh">0x7ffff54db910</span><span class="o">:</span> <span class="mh">0xfff8800000001337</span> <span class="mh">0xfff8800000001338</span> <span class="c1">// Elements HERE!</span>
<span class="mh">0x7ffff54db920</span><span class="o">:</span> <span class="mh">0x0000000000000000</span> <span class="mh">0x0000000000000000</span>
<span class="mh">0x7ffff54db930</span><span class="o">:</span> <span class="mh">0x0000000000000000</span> <span class="mh">0x0000000000000000</span>
<span class="mh">0x7ffff54db940</span><span class="o">:</span> <span class="mh">0x0000000000000000</span> <span class="mh">0x0000000000000000</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span>
</pre></table></code></div></div><h3 id="summary">Summary</h3><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="p">(</span><span class="n">lldb</span><span class="p">)</span> <span class="n">x</span><span class="o">/</span><span class="mi">8</span><span class="n">gx</span> <span class="mh">0x3d5accf811c0</span> <span class="c1">// It's object's address</span>
<span class="mh">0x3d5accf811c0</span><span class="o">:</span> <span class="mh">0x00003d5accf7d2b0</span><span class="p">(</span><span class="n">Group</span><span class="p">)</span> <span class="mh">0x00003d5accfab8a8</span><span class="p">(</span><span class="n">Shape</span><span class="p">)</span>
<span class="mh">0x3d5accf811d0</span><span class="o">:</span> <span class="mh">0x00007ffff54db8c0</span><span class="p">(</span><span class="n">Out</span><span class="o">-</span><span class="n">of</span><span class="o">-</span><span class="n">line</span> <span class="n">props</span><span class="p">)</span> <span class="mh">0x00007ffff54db910</span><span class="p">(</span><span class="n">Elements</span><span class="p">)</span>
<span class="mh">0x3d5accf811e0</span><span class="o">:</span> <span class="mh">0xfff8800000000041</span> <span class="mh">0xfff8800000000042</span><span class="p">(</span><span class="n">Inline</span> <span class="n">props</span><span class="p">)</span>
<span class="mh">0x3d5accf811f0</span><span class="o">:</span> <span class="mh">0x0000000000000000</span> <span class="mh">0x0000000000000000</span>
</pre></table></code></div></div><h1 id="troubleshooting">Troubleshooting</h1><h2 id="typeerror-cannot-create-nonetype-instances-while-jssrcconfigure">TypeError: cannot create ‘NoneType’ instances while js/src/configure</h2><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
</pre><td class="rouge-code"><pre> nonetype@box  ~/hack/browser/firefox/build  ../firefox-72.0/js/src/configure
Reexecuting <span class="k">in </span>the virtualenv
checking <span class="k">for </span>vcs <span class="nb">source </span>checkout... no
checking <span class="k">for </span>a shell... /bin/sh
checking <span class="k">for </span>host system type... x86_64-pc-linux-gnu
checking <span class="k">for </span>target system type... x86_64-pc-linux-gnu
checking <span class="k">for </span>Python 3... /usr/bin/python3 <span class="o">(</span>3.6.9<span class="o">)</span>
checking whether cross compiling... no
checking <span class="k">for </span>yasm... not found
checking <span class="k">for </span>the target C compiler... /usr/bin/gcc
checking whether the target C compiler can be used... <span class="nb">yes
</span>checking the target C compiler version... 7.5.0
checking the target C compiler works... <span class="nb">yes
</span>checking <span class="k">for </span>the target C++ compiler... /usr/bin/g++
checking whether the target C++ compiler can be used... <span class="nb">yes
</span>checking the target C++ compiler version... 7.5.0
checking the target C++ compiler works... <span class="nb">yes
</span>checking <span class="k">for </span>the host C compiler... /usr/bin/gcc
checking whether the host C compiler can be used... <span class="nb">yes
</span>checking the host C compiler version... 7.5.0
checking the host C compiler works... <span class="nb">yes
</span>checking <span class="k">for </span>the host C++ compiler... /usr/bin/g++
checking whether the host C++ compiler can be used... <span class="nb">yes
</span>checking the host C++ compiler version... 7.5.0
checking the host C++ compiler works... <span class="nb">yes
</span>checking <span class="k">for </span>64-bit OS... <span class="nb">yes
</span>checking <span class="k">for </span>nasm... not found
checking <span class="k">for </span>linker... bfd
checking <span class="k">for </span>the assembler... /usr/bin/gcc
checking <span class="k">for </span>ar... /usr/bin/ar
checking <span class="k">for </span>pkg_config... /usr/bin/pkg-config
checking <span class="k">for </span>pkg-config version... 0.29.1
checking <span class="k">for </span>stdint.h... <span class="nb">yes
</span>checking <span class="k">for </span>inttypes.h... <span class="nb">yes
</span>checking <span class="k">for </span>malloc.h... <span class="nb">yes
</span>checking <span class="k">for </span>alloca.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/byteorder.h... no
checking <span class="k">for </span>getopt.h... <span class="nb">yes
</span>checking <span class="k">for </span>unistd.h... <span class="nb">yes
</span>checking <span class="k">for </span>nl_types.h... <span class="nb">yes
</span>checking <span class="k">for </span>cpuid.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/statvfs.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/statfs.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/vfs.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/mount.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/quota.h... <span class="nb">yes
</span>checking <span class="k">for </span>linux/quota.h... <span class="nb">yes
</span>checking <span class="k">for </span>linux/if_addr.h... <span class="nb">yes
</span>checking <span class="k">for </span>linux/rtnetlink.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/queue.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/types.h... <span class="nb">yes
</span>checking <span class="k">for </span>netinet/in.h... <span class="nb">yes
</span>checking <span class="k">for </span>byteswap.h... <span class="nb">yes
</span>checking <span class="k">for </span>linux/perf_event.h... <span class="nb">yes
</span>checking <span class="k">for </span>perf_event_open system call... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wbitfield-enum-conversion</span>... no
checking whether the C++ compiler supports <span class="nt">-Wbitfield-enum-conversion</span>... no
checking whether the C compiler supports <span class="nt">-Wshadow-field-in-constructor-modified</span>... no
checking whether the C++ compiler supports <span class="nt">-Wshadow-field-in-constructor-modified</span>... no
checking whether the C compiler supports <span class="nt">-Wunreachable-code-return</span>... no
checking whether the C++ compiler supports <span class="nt">-Wunreachable-code-return</span>... no
checking whether the C compiler supports <span class="nt">-Wclass-varargs</span>... no
checking whether the C++ compiler supports <span class="nt">-Wclass-varargs</span>... no
checking whether the C compiler supports <span class="nt">-Wfloat-overflow-conversion</span>... no
checking whether the C++ compiler supports <span class="nt">-Wfloat-overflow-conversion</span>... no
checking whether the C compiler supports <span class="nt">-Wfloat-zero-conversion</span>... no
checking whether the C++ compiler supports <span class="nt">-Wfloat-zero-conversion</span>... no
checking whether the C compiler supports <span class="nt">-Wloop-analysis</span>... no
checking whether the C++ compiler supports <span class="nt">-Wloop-analysis</span>... no
checking whether the C++ compiler supports <span class="nt">-Wc</span>++1z-compat... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wc</span>++2a-compat... no
checking whether the C++ compiler supports <span class="nt">-Wcomma</span>... no
checking whether the C compiler supports <span class="nt">-Wduplicated-cond</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wduplicated-cond</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wimplicit-fallthrough</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wstring-conversion</span>... no
checking whether the C++ compiler supports <span class="nt">-Wstring-conversion</span>... no
checking whether the C compiler supports <span class="nt">-Wtautological-overlap-compare</span>... no
checking whether the C++ compiler supports <span class="nt">-Wtautological-overlap-compare</span>... no
checking whether the C compiler supports <span class="nt">-Wtautological-unsigned-enum-zero-compare</span>... no
checking whether the C++ compiler supports <span class="nt">-Wtautological-unsigned-enum-zero-compare</span>... no
checking whether the C compiler supports <span class="nt">-Wtautological-unsigned-zero-compare</span>... no
checking whether the C++ compiler supports <span class="nt">-Wtautological-unsigned-zero-compare</span>... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>tautological-type-limit-compare... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>tautological-type-limit-compare... no
checking whether the C++ compiler supports <span class="nt">-Wno-inline-new-delete</span>... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>maybe-uninitialized... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>maybe-uninitialized... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>deprecated-declarations... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>deprecated-declarations... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>array-bounds... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>array-bounds... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>coverage-mismatch... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>coverage-mismatch... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>backend-plugin... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>backend-plugin... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>free-nonheap-object... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>free-nonheap-object... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>multistatement-macros... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>multistatement-macros... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span><span class="k">return</span><span class="nt">-std-move</span>... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span><span class="k">return</span><span class="nt">-std-move</span>... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>class-memaccess... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>class-memaccess... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>atomic-alignment... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>atomic-alignment... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>deprecated-copy... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>deprecated-copy... no
checking whether the C compiler supports <span class="nt">-Wformat</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wformat</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wformat-security</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wformat-security</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wformat-overflow</span><span class="o">=</span>2... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wformat-overflow</span><span class="o">=</span>2... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-gnu-zero-variadic-macro-arguments</span>... no
checking whether the C++ compiler supports <span class="nt">-Wno-gnu-zero-variadic-macro-arguments</span>... no
checking whether the C++ compiler supports <span class="nt">-Wno-noexcept-type</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-fno-sized-deallocation</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-fno-aligned-new</span>... <span class="nb">yes
</span>checking <span class="k">for </span>rustc... not found
checking <span class="k">for </span>cargo... not found
Traceback <span class="o">(</span>most recent call last<span class="o">)</span>:
  File <span class="s2">"../firefox-72.0/js/src/../../configure.py"</span>, line 170, <span class="k">in</span> &lt;module&gt;
    sys.exit<span class="o">(</span>main<span class="o">(</span>sys.argv<span class="o">))</span>
  File <span class="s2">"../firefox-72.0/js/src/../../configure.py"</span>, line 46, <span class="k">in </span>main
    sandbox.run<span class="o">(</span>os.path.join<span class="o">(</span>os.path.dirname<span class="o">(</span>__file__<span class="o">)</span>, <span class="s1">'moz.configure'</span><span class="o">))</span>
  File <span class="s2">"/home/nonetype/hack/browser/firefox/firefox-72.0/python/mozbuild/mozbuild/configure/__init__.py"</span>, line 499, <span class="k">in </span>run
    func<span class="o">(</span><span class="k">*</span>args<span class="o">)</span>
  File <span class="s2">"/home/nonetype/hack/browser/firefox/firefox-72.0/python/mozbuild/mozbuild/configure/__init__.py"</span>, line 543, <span class="k">in </span>_value_for
    <span class="k">return </span>self._value_for_depends<span class="o">(</span>obj<span class="o">)</span>
  File <span class="s2">"/home/nonetype/hack/browser/firefox/firefox-72.0/python/mozbuild/mozbuild/util.py"</span>, line 997, <span class="k">in </span>method_call
    cache[args] <span class="o">=</span> self.func<span class="o">(</span>instance, <span class="k">*</span>args<span class="o">)</span>
  File <span class="s2">"/home/nonetype/hack/browser/firefox/firefox-72.0/python/mozbuild/mozbuild/configure/__init__.py"</span>, line 552, <span class="k">in </span>_value_for_depends
    value <span class="o">=</span> obj.result<span class="o">()</span>
  File <span class="s2">"/home/nonetype/hack/browser/firefox/firefox-72.0/python/mozbuild/mozbuild/util.py"</span>, line 997, <span class="k">in </span>method_call
    cache[args] <span class="o">=</span> self.func<span class="o">(</span>instance, <span class="k">*</span>args<span class="o">)</span>
  File <span class="s2">"/home/nonetype/hack/browser/firefox/firefox-72.0/python/mozbuild/mozbuild/configure/__init__.py"</span>, line 155, <span class="k">in </span>result
    <span class="k">return </span>self._func<span class="o">(</span><span class="k">*</span>resolved_args<span class="o">)</span>
  File <span class="s2">"/home/nonetype/hack/browser/firefox/firefox-72.0/python/mozbuild/mozbuild/configure/__init__.py"</span>, line 1152, <span class="k">in </span>wrapped
    <span class="k">return </span>new_func<span class="o">(</span><span class="k">*</span>args, <span class="k">**</span>kwargs<span class="o">)</span>
  File <span class="s2">"/home/nonetype/hack/browser/firefox/firefox-72.0/build/moz.configure/rust.configure"</span>, line 59, <span class="k">in </span>unwrap
    <span class="o">(</span>retcode, stdout, stderr<span class="o">)</span> <span class="o">=</span> get_cmd_output<span class="o">(</span>prog, <span class="s1">'+stable'</span><span class="o">)</span>
  File <span class="s2">"/home/nonetype/hack/browser/firefox/firefox-72.0/python/mozbuild/mozbuild/configure/__init__.py"</span>, line 1152, <span class="k">in </span>wrapped
    <span class="k">return </span>new_func<span class="o">(</span><span class="k">*</span>args, <span class="k">**</span>kwargs<span class="o">)</span>
  File <span class="s2">"/home/nonetype/hack/browser/firefox/firefox-72.0/build/moz.configure/util.configure"</span>, line 30, <span class="k">in </span>get_cmd_output
    log.debug<span class="o">(</span><span class="s1">'Executing: `%s`'</span>, quote<span class="o">(</span><span class="k">*</span>args<span class="o">))</span>
  File <span class="s2">"/home/nonetype/hack/browser/firefox/firefox-72.0/python/mozbuild/mozbuild/shellutil.py"</span>, line 210, <span class="k">in </span>quote
    <span class="k">return</span> <span class="s1">' '</span>.join<span class="o">(</span>_quote<span class="o">(</span>s<span class="o">)</span> <span class="k">for </span>s <span class="k">in </span>strings<span class="o">)</span>
  File <span class="s2">"/home/nonetype/hack/browser/firefox/firefox-72.0/python/mozbuild/mozbuild/shellutil.py"</span>, line 210, <span class="k">in</span> &lt;genexpr&gt;
    <span class="k">return</span> <span class="s1">' '</span>.join<span class="o">(</span>_quote<span class="o">(</span>s<span class="o">)</span> <span class="k">for </span>s <span class="k">in </span>strings<span class="o">)</span>
  File <span class="s2">"/home/nonetype/hack/browser/firefox/firefox-72.0/python/mozbuild/mozbuild/shellutil.py"</span>, line 198, <span class="k">in </span>_quote
    <span class="k">return </span>t<span class="o">(</span><span class="s2">"'%s'"</span><span class="o">)</span> % s.replace<span class="o">(</span>t<span class="o">(</span><span class="s2">"'"</span><span class="o">)</span>, t<span class="o">(</span><span class="s2">"'</span><span class="se">\\</span><span class="s2">''"</span><span class="o">))</span>
TypeError: cannot create <span class="s1">'NoneType'</span> instances
</pre></table></code></div></div><p><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1598642">reference</a>: rustc and cargo aren’t installed</p><h3 id="solution">Solution</h3><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>apt <span class="nb">install </span>rustc cargo
</pre></table></code></div></div><h2 id="error-cannot-find-llvm-objdump">ERROR: Cannot find llvm-objdump</h2><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
</pre><td class="rouge-code"><pre> nonetype@box  ~/hack/browser/firefox/build  ../firefox-72.0/js/src/configure
Reexecuting <span class="k">in </span>the virtualenv
checking <span class="k">for </span>vcs <span class="nb">source </span>checkout... no
checking <span class="k">for </span>a shell... /bin/sh
checking <span class="k">for </span>host system type... x86_64-pc-linux-gnu
checking <span class="k">for </span>target system type... x86_64-pc-linux-gnu
checking <span class="k">for </span>Python 3... /usr/bin/python3 <span class="o">(</span>3.6.9<span class="o">)</span>
checking whether cross compiling... no
checking <span class="k">for </span>yasm... not found
checking <span class="k">for </span>the target C compiler... /usr/bin/gcc
checking whether the target C compiler can be used... <span class="nb">yes
</span>checking the target C compiler version... 7.5.0
checking the target C compiler works... <span class="nb">yes
</span>checking <span class="k">for </span>the target C++ compiler... /usr/bin/g++
checking whether the target C++ compiler can be used... <span class="nb">yes
</span>checking the target C++ compiler version... 7.5.0
checking the target C++ compiler works... <span class="nb">yes
</span>checking <span class="k">for </span>the host C compiler... /usr/bin/gcc
checking whether the host C compiler can be used... <span class="nb">yes
</span>checking the host C compiler version... 7.5.0
checking the host C compiler works... <span class="nb">yes
</span>checking <span class="k">for </span>the host C++ compiler... /usr/bin/g++
checking whether the host C++ compiler can be used... <span class="nb">yes
</span>checking the host C++ compiler version... 7.5.0
checking the host C++ compiler works... <span class="nb">yes
</span>checking <span class="k">for </span>64-bit OS... <span class="nb">yes
</span>checking <span class="k">for </span>nasm... not found
checking <span class="k">for </span>linker... bfd
checking <span class="k">for </span>the assembler... /usr/bin/gcc
checking <span class="k">for </span>ar... /usr/bin/ar
checking <span class="k">for </span>pkg_config... /usr/bin/pkg-config
checking <span class="k">for </span>pkg-config version... 0.29.1
checking <span class="k">for </span>stdint.h... <span class="nb">yes
</span>checking <span class="k">for </span>inttypes.h... <span class="nb">yes
</span>checking <span class="k">for </span>malloc.h... <span class="nb">yes
</span>checking <span class="k">for </span>alloca.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/byteorder.h... no
checking <span class="k">for </span>getopt.h... <span class="nb">yes
</span>checking <span class="k">for </span>unistd.h... <span class="nb">yes
</span>checking <span class="k">for </span>nl_types.h... <span class="nb">yes
</span>checking <span class="k">for </span>cpuid.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/statvfs.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/statfs.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/vfs.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/mount.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/quota.h... <span class="nb">yes
</span>checking <span class="k">for </span>linux/quota.h... <span class="nb">yes
</span>checking <span class="k">for </span>linux/if_addr.h... <span class="nb">yes
</span>checking <span class="k">for </span>linux/rtnetlink.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/queue.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/types.h... <span class="nb">yes
</span>checking <span class="k">for </span>netinet/in.h... <span class="nb">yes
</span>checking <span class="k">for </span>byteswap.h... <span class="nb">yes
</span>checking <span class="k">for </span>linux/perf_event.h... <span class="nb">yes
</span>checking <span class="k">for </span>perf_event_open system call... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wbitfield-enum-conversion</span>... no
checking whether the C++ compiler supports <span class="nt">-Wbitfield-enum-conversion</span>... no
checking whether the C compiler supports <span class="nt">-Wshadow-field-in-constructor-modified</span>... no
checking whether the C++ compiler supports <span class="nt">-Wshadow-field-in-constructor-modified</span>... no
checking whether the C compiler supports <span class="nt">-Wunreachable-code-return</span>... no
checking whether the C++ compiler supports <span class="nt">-Wunreachable-code-return</span>... no
checking whether the C compiler supports <span class="nt">-Wclass-varargs</span>... no
checking whether the C++ compiler supports <span class="nt">-Wclass-varargs</span>... no
checking whether the C compiler supports <span class="nt">-Wfloat-overflow-conversion</span>... no
checking whether the C++ compiler supports <span class="nt">-Wfloat-overflow-conversion</span>... no
checking whether the C compiler supports <span class="nt">-Wfloat-zero-conversion</span>... no
checking whether the C++ compiler supports <span class="nt">-Wfloat-zero-conversion</span>... no
checking whether the C compiler supports <span class="nt">-Wloop-analysis</span>... no
checking whether the C++ compiler supports <span class="nt">-Wloop-analysis</span>... no
checking whether the C++ compiler supports <span class="nt">-Wc</span>++1z-compat... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wc</span>++2a-compat... no
checking whether the C++ compiler supports <span class="nt">-Wcomma</span>... no
checking whether the C compiler supports <span class="nt">-Wduplicated-cond</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wduplicated-cond</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wimplicit-fallthrough</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wstring-conversion</span>... no
checking whether the C++ compiler supports <span class="nt">-Wstring-conversion</span>... no
checking whether the C compiler supports <span class="nt">-Wtautological-overlap-compare</span>... no
checking whether the C++ compiler supports <span class="nt">-Wtautological-overlap-compare</span>... no
checking whether the C compiler supports <span class="nt">-Wtautological-unsigned-enum-zero-compare</span>... no
checking whether the C++ compiler supports <span class="nt">-Wtautological-unsigned-enum-zero-compare</span>... no
checking whether the C compiler supports <span class="nt">-Wtautological-unsigned-zero-compare</span>... no
checking whether the C++ compiler supports <span class="nt">-Wtautological-unsigned-zero-compare</span>... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>tautological-type-limit-compare... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>tautological-type-limit-compare... no
checking whether the C++ compiler supports <span class="nt">-Wno-inline-new-delete</span>... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>maybe-uninitialized... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>maybe-uninitialized... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>deprecated-declarations... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>deprecated-declarations... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>array-bounds... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>array-bounds... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>coverage-mismatch... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>coverage-mismatch... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>backend-plugin... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>backend-plugin... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>free-nonheap-object... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>free-nonheap-object... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>multistatement-macros... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>multistatement-macros... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span><span class="k">return</span><span class="nt">-std-move</span>... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span><span class="k">return</span><span class="nt">-std-move</span>... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>class-memaccess... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>class-memaccess... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>atomic-alignment... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>atomic-alignment... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>deprecated-copy... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>deprecated-copy... no
checking whether the C compiler supports <span class="nt">-Wformat</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wformat</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wformat-security</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wformat-security</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wformat-overflow</span><span class="o">=</span>2... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wformat-overflow</span><span class="o">=</span>2... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-gnu-zero-variadic-macro-arguments</span>... no
checking whether the C++ compiler supports <span class="nt">-Wno-gnu-zero-variadic-macro-arguments</span>... no
checking whether the C++ compiler supports <span class="nt">-Wno-noexcept-type</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-fno-sized-deallocation</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-fno-aligned-new</span>... <span class="nb">yes
</span>checking <span class="k">for </span>rustc... /usr/bin/rustc
checking <span class="k">for </span>cargo... /usr/bin/cargo
checking rustc version... 1.39.0
checking cargo version... 1.39.0
checking <span class="k">for </span>rust target triplet... x86_64-unknown-linux-gnu
checking <span class="k">for </span>rust host triplet... x86_64-unknown-linux-gnu
checking <span class="k">for </span>rustdoc... /usr/bin/rustdoc
checking <span class="k">for </span>rustfmt... not found
checking <span class="k">for </span>clang <span class="k">for </span>bindgen... not found
checking <span class="k">for </span>libclang <span class="k">for </span>bindgen... not found
checking bindgen cflags... <span class="nt">-x</span> c++ <span class="nt">-fno-sized-deallocation</span> <span class="nt">-fno-aligned-new</span> <span class="nt">-DTRACING</span><span class="o">=</span>1 <span class="nt">-DIMPL_LIBXUL</span> <span class="nt">-DMOZILLA_INTERNAL_API</span> <span class="nt">-DRUST_BINDGEN</span> <span class="nt">-DOS_POSIX</span><span class="o">=</span>1 <span class="nt">-DOS_LINUX</span><span class="o">=</span>1
checking <span class="k">for </span>llvm_profdata... not found
checking <span class="k">for </span>awk... /usr/bin/gawk
checking <span class="k">for </span>perl... /usr/bin/perl
checking <span class="k">for </span>minimum required perl version <span class="o">&gt;=</span> 5.006... 5.026001
checking <span class="k">for </span>full perl installation... <span class="nb">yes
</span>checking <span class="k">for </span>gmake... /usr/bin/make
checking <span class="k">for </span>watchman... not found
checking <span class="k">for </span>xargs... /usr/bin/xargs
checking <span class="k">for </span>rpmbuild... /usr/bin/rpmbuild
checking <span class="k">for </span>llvm-objdump... not found
DEBUG: llvm_objdump: Trying llvm-objdump
ERROR: Cannot find llvm-objdump
</pre></table></code></div></div><h3 id="solution-1">Solution</h3><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>apt <span class="nb">install </span>llvm
</pre></table></code></div></div><h2 id="error-could-not-find-autoconf-213">ERROR: Could not find autoconf 2.13</h2><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
</pre><td class="rouge-code"><pre> nonetype@box  ~/hack/browser/firefox/build  ../firefox-72.0/js/src/configure
Reexecuting <span class="k">in </span>the virtualenv
checking <span class="k">for </span>vcs <span class="nb">source </span>checkout... no
checking <span class="k">for </span>a shell... /bin/sh
checking <span class="k">for </span>host system type... x86_64-pc-linux-gnu
checking <span class="k">for </span>target system type... x86_64-pc-linux-gnu
checking <span class="k">for </span>Python 3... /usr/bin/python3 <span class="o">(</span>3.6.9<span class="o">)</span>
checking whether cross compiling... no
checking <span class="k">for </span>yasm... not found
checking <span class="k">for </span>the target C compiler... /usr/bin/gcc
checking whether the target C compiler can be used... <span class="nb">yes
</span>checking the target C compiler version... 7.5.0
checking the target C compiler works... <span class="nb">yes
</span>checking <span class="k">for </span>the target C++ compiler... /usr/bin/g++
checking whether the target C++ compiler can be used... <span class="nb">yes
</span>checking the target C++ compiler version... 7.5.0
checking the target C++ compiler works... <span class="nb">yes
</span>checking <span class="k">for </span>the host C compiler... /usr/bin/gcc
checking whether the host C compiler can be used... <span class="nb">yes
</span>checking the host C compiler version... 7.5.0
checking the host C compiler works... <span class="nb">yes
</span>checking <span class="k">for </span>the host C++ compiler... /usr/bin/g++
checking whether the host C++ compiler can be used... <span class="nb">yes
</span>checking the host C++ compiler version... 7.5.0
checking the host C++ compiler works... <span class="nb">yes
</span>checking <span class="k">for </span>64-bit OS... <span class="nb">yes
</span>checking <span class="k">for </span>nasm... not found
checking <span class="k">for </span>linker... bfd
checking <span class="k">for </span>the assembler... /usr/bin/gcc
checking <span class="k">for </span>ar... /usr/bin/ar
checking <span class="k">for </span>pkg_config... /usr/bin/pkg-config
checking <span class="k">for </span>pkg-config version... 0.29.1
checking <span class="k">for </span>stdint.h... <span class="nb">yes
</span>checking <span class="k">for </span>inttypes.h... <span class="nb">yes
</span>checking <span class="k">for </span>malloc.h... <span class="nb">yes
</span>checking <span class="k">for </span>alloca.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/byteorder.h... no
checking <span class="k">for </span>getopt.h... <span class="nb">yes
</span>checking <span class="k">for </span>unistd.h... <span class="nb">yes
</span>checking <span class="k">for </span>nl_types.h... <span class="nb">yes
</span>checking <span class="k">for </span>cpuid.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/statvfs.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/statfs.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/vfs.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/mount.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/quota.h... <span class="nb">yes
</span>checking <span class="k">for </span>linux/quota.h... <span class="nb">yes
</span>checking <span class="k">for </span>linux/if_addr.h... <span class="nb">yes
</span>checking <span class="k">for </span>linux/rtnetlink.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/queue.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/types.h... <span class="nb">yes
</span>checking <span class="k">for </span>netinet/in.h... <span class="nb">yes
</span>checking <span class="k">for </span>byteswap.h... <span class="nb">yes
</span>checking <span class="k">for </span>linux/perf_event.h... <span class="nb">yes
</span>checking <span class="k">for </span>perf_event_open system call... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wbitfield-enum-conversion</span>... no
checking whether the C++ compiler supports <span class="nt">-Wbitfield-enum-conversion</span>... no
checking whether the C compiler supports <span class="nt">-Wshadow-field-in-constructor-modified</span>... no
checking whether the C++ compiler supports <span class="nt">-Wshadow-field-in-constructor-modified</span>... no
checking whether the C compiler supports <span class="nt">-Wunreachable-code-return</span>... no
checking whether the C++ compiler supports <span class="nt">-Wunreachable-code-return</span>... no
checking whether the C compiler supports <span class="nt">-Wclass-varargs</span>... no
checking whether the C++ compiler supports <span class="nt">-Wclass-varargs</span>... no
checking whether the C compiler supports <span class="nt">-Wfloat-overflow-conversion</span>... no
checking whether the C++ compiler supports <span class="nt">-Wfloat-overflow-conversion</span>... no
checking whether the C compiler supports <span class="nt">-Wfloat-zero-conversion</span>... no
checking whether the C++ compiler supports <span class="nt">-Wfloat-zero-conversion</span>... no
checking whether the C compiler supports <span class="nt">-Wloop-analysis</span>... no
checking whether the C++ compiler supports <span class="nt">-Wloop-analysis</span>... no
checking whether the C++ compiler supports <span class="nt">-Wc</span>++1z-compat... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wc</span>++2a-compat... no
checking whether the C++ compiler supports <span class="nt">-Wcomma</span>... no
checking whether the C compiler supports <span class="nt">-Wduplicated-cond</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wduplicated-cond</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wimplicit-fallthrough</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wstring-conversion</span>... no
checking whether the C++ compiler supports <span class="nt">-Wstring-conversion</span>... no
checking whether the C compiler supports <span class="nt">-Wtautological-overlap-compare</span>... no
checking whether the C++ compiler supports <span class="nt">-Wtautological-overlap-compare</span>... no
checking whether the C compiler supports <span class="nt">-Wtautological-unsigned-enum-zero-compare</span>... no
checking whether the C++ compiler supports <span class="nt">-Wtautological-unsigned-enum-zero-compare</span>... no
checking whether the C compiler supports <span class="nt">-Wtautological-unsigned-zero-compare</span>... no
checking whether the C++ compiler supports <span class="nt">-Wtautological-unsigned-zero-compare</span>... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>tautological-type-limit-compare... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>tautological-type-limit-compare... no
checking whether the C++ compiler supports <span class="nt">-Wno-inline-new-delete</span>... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>maybe-uninitialized... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>maybe-uninitialized... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>deprecated-declarations... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>deprecated-declarations... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>array-bounds... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>array-bounds... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>coverage-mismatch... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>coverage-mismatch... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>backend-plugin... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>backend-plugin... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>free-nonheap-object... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>free-nonheap-object... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>multistatement-macros... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>multistatement-macros... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span><span class="k">return</span><span class="nt">-std-move</span>... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span><span class="k">return</span><span class="nt">-std-move</span>... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>class-memaccess... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>class-memaccess... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>atomic-alignment... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>atomic-alignment... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>deprecated-copy... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>deprecated-copy... no
checking whether the C compiler supports <span class="nt">-Wformat</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wformat</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wformat-security</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wformat-security</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wformat-overflow</span><span class="o">=</span>2... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wformat-overflow</span><span class="o">=</span>2... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-gnu-zero-variadic-macro-arguments</span>... no
checking whether the C++ compiler supports <span class="nt">-Wno-gnu-zero-variadic-macro-arguments</span>... no
checking whether the C++ compiler supports <span class="nt">-Wno-noexcept-type</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-fno-sized-deallocation</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-fno-aligned-new</span>... <span class="nb">yes
</span>checking <span class="k">for </span>rustc... /usr/bin/rustc
checking <span class="k">for </span>cargo... /usr/bin/cargo
checking rustc version... 1.39.0
checking cargo version... 1.39.0
checking <span class="k">for </span>rust target triplet... x86_64-unknown-linux-gnu
checking <span class="k">for </span>rust host triplet... x86_64-unknown-linux-gnu
checking <span class="k">for </span>rustdoc... /usr/bin/rustdoc
checking <span class="k">for </span>rustfmt... not found
checking <span class="k">for </span>clang <span class="k">for </span>bindgen... not found
checking <span class="k">for </span>libclang <span class="k">for </span>bindgen... not found
checking bindgen cflags... <span class="nt">-x</span> c++ <span class="nt">-fno-sized-deallocation</span> <span class="nt">-fno-aligned-new</span> <span class="nt">-DTRACING</span><span class="o">=</span>1 <span class="nt">-DIMPL_LIBXUL</span> <span class="nt">-DMOZILLA_INTERNAL_API</span> <span class="nt">-DRUST_BINDGEN</span> <span class="nt">-DOS_POSIX</span><span class="o">=</span>1 <span class="nt">-DOS_LINUX</span><span class="o">=</span>1
checking <span class="k">for </span>llvm_profdata... /usr/bin/llvm-profdata
checking <span class="k">for </span>awk... /usr/bin/gawk
checking <span class="k">for </span>perl... /usr/bin/perl
checking <span class="k">for </span>minimum required perl version <span class="o">&gt;=</span> 5.006... 5.026001
checking <span class="k">for </span>full perl installation... <span class="nb">yes
</span>checking <span class="k">for </span>gmake... /usr/bin/make
checking <span class="k">for </span>watchman... not found
checking <span class="k">for </span>xargs... /usr/bin/xargs
checking <span class="k">for </span>rpmbuild... /usr/bin/rpmbuild
checking <span class="k">for </span>llvm-objdump... /usr/bin/llvm-objdump
checking <span class="k">for </span>autoconf...
ERROR: Could not find autoconf 2.13
</pre></table></code></div></div><h3 id="solution-2">Solution</h3><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>apt <span class="nb">install </span>autoconf2.13
</pre></table></code></div></div><h2 id="error-cannot-find-cbindgen">ERROR: Cannot find cbindgen.</h2><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
</pre><td class="rouge-code"><pre>nonetype@box:~/hack/browser/firefox/build-72.0-debug<span class="nv">$ </span>../firefox-72.0/configure <span class="nt">--enable-debug</span>
Creating Python environment
New python executable <span class="k">in</span> /home/nonetype/hack/browser/firefox/build-72.0-debug/_virtualenvs/init/bin/python2.7
Also creating executable <span class="k">in</span> /home/nonetype/hack/browser/firefox/build-72.0-debug/_virtualenvs/init/bin/python
Installing setuptools, pip, wheel...done.
running build_ext
copying build/lib.linux-x86_64-2.7/psutil/_psutil_linux.so -&gt; psutil
copying build/lib.linux-x86_64-2.7/psutil/_psutil_posix.so -&gt; psutil

Error processing command. Ignoring because optional. <span class="o">(</span>optional:packages.txt:comm/build/virtualenv_packages.txt<span class="o">)</span>
Reexecuting <span class="k">in </span>the virtualenv
checking <span class="k">for </span>vcs <span class="nb">source </span>checkout... no
checking <span class="k">for </span>a shell... /bin/sh
checking <span class="k">for </span>host system type... x86_64-pc-linux-gnu
checking <span class="k">for </span>target system type... x86_64-pc-linux-gnu
checking whether cross compiling... no
checking <span class="k">for </span>Python 3... /usr/bin/python3 <span class="o">(</span>3.6.9<span class="o">)</span>
checking <span class="k">for </span>yasm... not found
checking <span class="k">for </span>the target C compiler... /usr/bin/gcc
checking whether the target C compiler can be used... <span class="nb">yes
</span>checking the target C compiler version... 7.5.0
checking the target C compiler works... <span class="nb">yes
</span>checking <span class="k">for </span>the target C++ compiler... /usr/bin/g++
checking whether the target C++ compiler can be used... <span class="nb">yes
</span>checking the target C++ compiler version... 7.5.0
checking the target C++ compiler works... <span class="nb">yes
</span>checking <span class="k">for </span>the host C compiler... /usr/bin/gcc
checking whether the host C compiler can be used... <span class="nb">yes
</span>checking the host C compiler version... 7.5.0
checking the host C compiler works... <span class="nb">yes
</span>checking <span class="k">for </span>the host C++ compiler... /usr/bin/g++
checking whether the host C++ compiler can be used... <span class="nb">yes
</span>checking the host C++ compiler version... 7.5.0
checking the host C++ compiler works... <span class="nb">yes
</span>checking <span class="k">for </span>64-bit OS... <span class="nb">yes
</span>checking <span class="k">for </span>nasm... not found
checking <span class="k">for </span>linker... bfd
checking <span class="k">for </span>the assembler... /usr/bin/gcc
checking <span class="k">for </span>ar... /usr/bin/ar
checking <span class="k">for </span>pkg_config... /usr/bin/pkg-config
checking <span class="k">for </span>pkg-config version... 0.29.1
checking <span class="k">for </span>stdint.h... <span class="nb">yes
</span>checking <span class="k">for </span>inttypes.h... <span class="nb">yes
</span>checking <span class="k">for </span>malloc.h... <span class="nb">yes
</span>checking <span class="k">for </span>alloca.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/byteorder.h... no
checking <span class="k">for </span>getopt.h... <span class="nb">yes
</span>checking <span class="k">for </span>unistd.h... <span class="nb">yes
</span>checking <span class="k">for </span>nl_types.h... <span class="nb">yes
</span>checking <span class="k">for </span>cpuid.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/statvfs.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/statfs.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/vfs.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/mount.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/quota.h... <span class="nb">yes
</span>checking <span class="k">for </span>linux/quota.h... <span class="nb">yes
</span>checking <span class="k">for </span>linux/if_addr.h... <span class="nb">yes
</span>checking <span class="k">for </span>linux/rtnetlink.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/queue.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/types.h... <span class="nb">yes
</span>checking <span class="k">for </span>netinet/in.h... <span class="nb">yes
</span>checking <span class="k">for </span>byteswap.h... <span class="nb">yes
</span>checking <span class="k">for </span>linux/perf_event.h... <span class="nb">yes
</span>checking <span class="k">for </span>perf_event_open system call... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wbitfield-enum-conversion</span>... no
checking whether the C++ compiler supports <span class="nt">-Wbitfield-enum-conversion</span>... no
checking whether the C compiler supports <span class="nt">-Wshadow-field-in-constructor-modified</span>... no
checking whether the C++ compiler supports <span class="nt">-Wshadow-field-in-constructor-modified</span>... no
checking whether the C compiler supports <span class="nt">-Wunreachable-code-return</span>... no
checking whether the C++ compiler supports <span class="nt">-Wunreachable-code-return</span>... no
checking whether the C compiler supports <span class="nt">-Wclass-varargs</span>... no
checking whether the C++ compiler supports <span class="nt">-Wclass-varargs</span>... no
checking whether the C compiler supports <span class="nt">-Wfloat-overflow-conversion</span>... no
checking whether the C++ compiler supports <span class="nt">-Wfloat-overflow-conversion</span>... no
checking whether the C compiler supports <span class="nt">-Wfloat-zero-conversion</span>... no
checking whether the C++ compiler supports <span class="nt">-Wfloat-zero-conversion</span>... no
checking whether the C compiler supports <span class="nt">-Wloop-analysis</span>... no
checking whether the C++ compiler supports <span class="nt">-Wloop-analysis</span>... no
checking whether the C++ compiler supports <span class="nt">-Wc</span>++1z-compat... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wc</span>++2a-compat... no
checking whether the C++ compiler supports <span class="nt">-Wcomma</span>... no
checking whether the C compiler supports <span class="nt">-Wduplicated-cond</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wduplicated-cond</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wimplicit-fallthrough</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wstring-conversion</span>... no
checking whether the C++ compiler supports <span class="nt">-Wstring-conversion</span>... no
checking whether the C compiler supports <span class="nt">-Wtautological-overlap-compare</span>... no
checking whether the C++ compiler supports <span class="nt">-Wtautological-overlap-compare</span>... no
checking whether the C compiler supports <span class="nt">-Wtautological-unsigned-enum-zero-compare</span>... no
checking whether the C++ compiler supports <span class="nt">-Wtautological-unsigned-enum-zero-compare</span>... no
checking whether the C compiler supports <span class="nt">-Wtautological-unsigned-zero-compare</span>... no
checking whether the C++ compiler supports <span class="nt">-Wtautological-unsigned-zero-compare</span>... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>tautological-type-limit-compare... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>tautological-type-limit-compare... no
checking whether the C++ compiler supports <span class="nt">-Wno-inline-new-delete</span>... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>maybe-uninitialized... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>maybe-uninitialized... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>deprecated-declarations... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>deprecated-declarations... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>array-bounds... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>array-bounds... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>coverage-mismatch... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>coverage-mismatch... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>backend-plugin... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>backend-plugin... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>free-nonheap-object... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>free-nonheap-object... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>multistatement-macros... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>multistatement-macros... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span><span class="k">return</span><span class="nt">-std-move</span>... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span><span class="k">return</span><span class="nt">-std-move</span>... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>class-memaccess... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>class-memaccess... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>atomic-alignment... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>atomic-alignment... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>deprecated-copy... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>deprecated-copy... no
checking whether the C compiler supports <span class="nt">-Wformat</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wformat</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wformat-security</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wformat-security</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wformat-overflow</span><span class="o">=</span>2... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wformat-overflow</span><span class="o">=</span>2... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-gnu-zero-variadic-macro-arguments</span>... no
checking whether the C++ compiler supports <span class="nt">-Wno-gnu-zero-variadic-macro-arguments</span>... no
checking whether the C++ compiler supports <span class="nt">-fno-sized-deallocation</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-fno-aligned-new</span>... <span class="nb">yes
</span>checking <span class="k">for </span>libpulse... <span class="nb">yes
</span>checking MOZ_PULSEAUDIO_CFLAGS... <span class="nt">-D_REENTRANT</span>
checking MOZ_PULSEAUDIO_LIBS... <span class="nt">-lpulse</span>
checking <span class="k">for </span>rustc... /usr/bin/rustc
checking <span class="k">for </span>cargo... /usr/bin/cargo
checking rustc version... 1.39.0
checking cargo version... 1.39.0
checking <span class="k">for </span>rust target triplet... x86_64-unknown-linux-gnu
checking <span class="k">for </span>rust host triplet... x86_64-unknown-linux-gnu
checking <span class="k">for </span>rustdoc... /usr/bin/rustdoc
checking <span class="k">for </span>cbindgen... no
ERROR: Cannot find cbindgen. Please run <span class="sb">`</span>mach bootstrap<span class="sb">`</span>,
<span class="sb">`</span>cargo <span class="nb">install </span>cbindgen<span class="sb">`</span>, ensure that <span class="sb">`</span>cbindgen<span class="sb">`</span> is on your PATH,
or point at an executable with <span class="sb">`</span>CBINDGEN<span class="sb">`</span><span class="nb">.</span>
</pre></table></code></div></div><h3 id="solution-3">Solution</h3><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>cargo <span class="nb">install </span>cbindgen
</pre></table></code></div></div><h2 id="error-could-not-find-clang-to-generate-run-bindings-for-cc">ERROR: Could not find clang to generate run bindings for C/C++</h2><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
</pre><td class="rouge-code"><pre>nonetype@box:~/hack/browser/firefox/build-72.0-debug<span class="nv">$ </span>../firefox-72.0/configure <span class="nt">--enable-debug</span>
Reexecuting <span class="k">in </span>the virtualenv
checking <span class="k">for </span>vcs <span class="nb">source </span>checkout... no
checking <span class="k">for </span>a shell... /bin/sh
checking <span class="k">for </span>host system type... x86_64-pc-linux-gnu
checking <span class="k">for </span>target system type... x86_64-pc-linux-gnu
checking whether cross compiling... no
checking <span class="k">for </span>Python 3... /usr/bin/python3 <span class="o">(</span>3.6.9<span class="o">)</span>
checking <span class="k">for </span>yasm... not found
checking <span class="k">for </span>the target C compiler... /usr/bin/gcc
checking whether the target C compiler can be used... <span class="nb">yes
</span>checking the target C compiler version... 7.5.0
checking the target C compiler works... <span class="nb">yes
</span>checking <span class="k">for </span>the target C++ compiler... /usr/bin/g++
checking whether the target C++ compiler can be used... <span class="nb">yes
</span>checking the target C++ compiler version... 7.5.0
checking the target C++ compiler works... <span class="nb">yes
</span>checking <span class="k">for </span>the host C compiler... /usr/bin/gcc
checking whether the host C compiler can be used... <span class="nb">yes
</span>checking the host C compiler version... 7.5.0
checking the host C compiler works... <span class="nb">yes
</span>checking <span class="k">for </span>the host C++ compiler... /usr/bin/g++
checking whether the host C++ compiler can be used... <span class="nb">yes
</span>checking the host C++ compiler version... 7.5.0
checking the host C++ compiler works... <span class="nb">yes
</span>checking <span class="k">for </span>64-bit OS... <span class="nb">yes
</span>checking <span class="k">for </span>nasm... not found
checking <span class="k">for </span>linker... bfd
checking <span class="k">for </span>the assembler... /usr/bin/gcc
checking <span class="k">for </span>ar... /usr/bin/ar
checking <span class="k">for </span>pkg_config... /usr/bin/pkg-config
checking <span class="k">for </span>pkg-config version... 0.29.1
checking <span class="k">for </span>stdint.h... <span class="nb">yes
</span>checking <span class="k">for </span>inttypes.h... <span class="nb">yes
</span>checking <span class="k">for </span>malloc.h... <span class="nb">yes
</span>checking <span class="k">for </span>alloca.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/byteorder.h... no
checking <span class="k">for </span>getopt.h... <span class="nb">yes
</span>checking <span class="k">for </span>unistd.h... <span class="nb">yes
</span>checking <span class="k">for </span>nl_types.h... <span class="nb">yes
</span>checking <span class="k">for </span>cpuid.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/statvfs.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/statfs.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/vfs.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/mount.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/quota.h... <span class="nb">yes
</span>checking <span class="k">for </span>linux/quota.h... <span class="nb">yes
</span>checking <span class="k">for </span>linux/if_addr.h... <span class="nb">yes
</span>checking <span class="k">for </span>linux/rtnetlink.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/queue.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/types.h... <span class="nb">yes
</span>checking <span class="k">for </span>netinet/in.h... <span class="nb">yes
</span>checking <span class="k">for </span>byteswap.h... <span class="nb">yes
</span>checking <span class="k">for </span>linux/perf_event.h... <span class="nb">yes
</span>checking <span class="k">for </span>perf_event_open system call... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wbitfield-enum-conversion</span>... no
checking whether the C++ compiler supports <span class="nt">-Wbitfield-enum-conversion</span>... no
checking whether the C compiler supports <span class="nt">-Wshadow-field-in-constructor-modified</span>... no
+ compiler supports <span class="nt">-Wclass-varargs</span>... no
checking whether the C compiler supports <span class="nt">-Wfloat-overflow-conversion</span>... no
checking whether the C++ compiler supports <span class="nt">-Wfloat-overflow-conversion</span>... no
checking whether the C compiler supports <span class="nt">-Wfloat-zero-conversion</span>... no
checking whether the C++ compiler supports <span class="nt">-Wfloat-zero-conversion</span>... no
checking whether the C compiler supports <span class="nt">-Wloop-analysis</span>... no
checking whether the C++ compiler supports <span class="nt">-Wloop-analysis</span>... no
checking whether the C++ compiler supports <span class="nt">-Wc</span>++1z-compat... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wc</span>++2a-compat... no
checking whether the C++ compiler supports <span class="nt">-Wcomma</span>... no
checking whether the C compiler supports <span class="nt">-Wduplicated-cond</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wduplicated-cond</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wimplicit-fallthrough</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wstring-conversion</span>... no
checking whether the C++ compiler supports <span class="nt">-Wstring-conversion</span>... no
checking whether the C compiler supports <span class="nt">-Wtautological-overlap-compare</span>... no
checking whether the C++ compiler supports <span class="nt">-Wtautological-overlap-compare</span>... no
checking whether the C compiler supports <span class="nt">-Wtautological-unsigned-enum-zero-compare</span>... no
checking whether the C++ compiler supports <span class="nt">-Wtautological-unsigned-enum-zero-compare</span>... no
checking whether the C compiler supports <span class="nt">-Wtautological-unsigned-zero-compare</span>... no
checking whether the C++ compiler supports <span class="nt">-Wtautological-unsigned-zero-compare</span>... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>tautological-type-limit-compare... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>tautological-type-limit-compare... no
checking whether the C++ compiler supports <span class="nt">-Wno-inline-new-delete</span>... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>maybe-uninitialized... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>maybe-uninitialized... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>deprecated-declarations... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>deprecated-declarations... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>array-bounds... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>array-bounds... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>coverage-mismatch... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>coverage-mismatch... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>backend-plugin... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>backend-plugin... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>free-nonheap-object... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>free-nonheap-object... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>multistatement-macros... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>multistatement-macros... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span><span class="k">return</span><span class="nt">-std-move</span>... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span><span class="k">return</span><span class="nt">-std-move</span>... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>class-memaccess... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>class-memaccess... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>atomic-alignment... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>atomic-alignment... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>deprecated-copy... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>deprecated-copy... no
checking whether the C compiler supports <span class="nt">-Wformat</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wformat</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wformat-security</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wformat-security</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wformat-overflow</span><span class="o">=</span>2... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wformat-overflow</span><span class="o">=</span>2... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-gnu-zero-variadic-macro-arguments</span>... no
checking whether the C++ compiler supports <span class="nt">-Wno-gnu-zero-variadic-macro-arguments</span>... no
checking whether the C++ compiler supports <span class="nt">-fno-sized-deallocation</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-fno-aligned-new</span>... <span class="nb">yes
</span>checking <span class="k">for </span>libpulse... <span class="nb">yes
</span>checking MOZ_PULSEAUDIO_CFLAGS... <span class="nt">-D_REENTRANT</span>
checking MOZ_PULSEAUDIO_LIBS... <span class="nt">-lpulse</span>
checking <span class="k">for </span>rustc... /usr/bin/rustc
checking <span class="k">for </span>cargo... /usr/bin/cargo
checking rustc version... 1.39.0
checking cargo version... 1.39.0
checking <span class="k">for </span>rust target triplet... x86_64-unknown-linux-gnu
checking <span class="k">for </span>rust host triplet... x86_64-unknown-linux-gnu
checking <span class="k">for </span>rustdoc... /usr/bin/rustdoc
checking <span class="k">for </span>cbindgen... /home/nonetype/.cargo/bin/cbindgen
checking <span class="k">for </span>rustfmt... not found
checking <span class="k">for </span>clang <span class="k">for </span>bindgen... not found
checking <span class="k">for </span>libclang <span class="k">for </span>bindgen... not found
ERROR: Could not find clang to generate run bindings <span class="k">for </span>C/C++. Please <span class="nb">install </span>the necessary packages, run <span class="sb">`</span>mach bootstrap<span class="sb">`</span>, or use <span class="nt">--with-clang-path</span> to give the location of clang.
</pre></table></code></div></div><h3 id="solution-4">Solution</h3><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>apt <span class="nb">install </span>clang
</pre></table></code></div></div><h2 id="error-could-not-find-nodejs-executable-later-than-811">ERROR: could not find Node.js executable later than 8.11</h2><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
</pre><td class="rouge-code"><pre>nonetype@box:~/hack/browser/firefox/build-72.0<span class="nv">$ </span>../firefox-72.0/configure <span class="nt">--enable-debug</span>
Reexecuting <span class="k">in </span>the virtualenv
checking <span class="k">for </span>vcs <span class="nb">source </span>checkout... no
checking <span class="k">for </span>a shell... /bin/sh
checking <span class="k">for </span>host system type... x86_64-pc-linux-gnu
checking <span class="k">for </span>target system type... x86_64-pc-linux-gnu
checking whether cross compiling... no
checking <span class="k">for </span>Python 3... /usr/bin/python3 <span class="o">(</span>3.6.9<span class="o">)</span>
checking <span class="k">for </span>yasm... not found
checking <span class="k">for </span>the target C compiler... /usr/bin/clang
checking whether the target C compiler can be used... <span class="nb">yes
</span>checking the target C compiler version... 6.0.0
checking the target C compiler works... <span class="nb">yes
</span>checking <span class="k">for </span>the target C++ compiler... /usr/bin/clang++
checking whether the target C++ compiler can be used... <span class="nb">yes
</span>checking the target C++ compiler version... 6.0.0
checking the target C++ compiler works... <span class="nb">yes
</span>checking <span class="k">for </span>the host C compiler... /usr/bin/clang
checking whether the host C compiler can be used... <span class="nb">yes
</span>checking the host C compiler version... 6.0.0
checking the host C compiler works... <span class="nb">yes
</span>checking <span class="k">for </span>the host C++ compiler... /usr/bin/clang++
checking whether the host C++ compiler can be used... <span class="nb">yes
</span>checking the host C++ compiler version... 6.0.0
checking the host C++ compiler works... <span class="nb">yes
</span>checking <span class="k">for </span>64-bit OS... <span class="nb">yes
</span>checking <span class="k">for </span>nasm... not found
checking <span class="k">for </span>linker... bfd
checking <span class="k">for </span>the assembler... /usr/bin/clang
checking <span class="k">for </span>ar... /usr/bin/ar
checking <span class="k">for </span>pkg_config... /usr/bin/pkg-config
checking <span class="k">for </span>pkg-config version... 0.29.1
checking <span class="k">for </span>stdint.h... <span class="nb">yes
</span>checking <span class="k">for </span>inttypes.h... <span class="nb">yes
</span>checking <span class="k">for </span>malloc.h... <span class="nb">yes
</span>checking <span class="k">for </span>alloca.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/byteorder.h... no
checking <span class="k">for </span>getopt.h... <span class="nb">yes
</span>checking <span class="k">for </span>unistd.h... <span class="nb">yes
</span>checking <span class="k">for </span>nl_types.h... <span class="nb">yes
</span>checking <span class="k">for </span>cpuid.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/statvfs.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/statfs.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/vfs.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/mount.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/quota.h... <span class="nb">yes
</span>checking <span class="k">for </span>linux/quota.h... <span class="nb">yes
</span>checking <span class="k">for </span>linux/if_addr.h... <span class="nb">yes
</span>checking <span class="k">for </span>linux/rtnetlink.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/queue.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/types.h... <span class="nb">yes
</span>checking <span class="k">for </span>netinet/in.h... <span class="nb">yes
</span>checking <span class="k">for </span>byteswap.h... <span class="nb">yes
</span>checking <span class="k">for </span>linux/perf_event.h... <span class="nb">yes
</span>checking <span class="k">for </span>perf_event_open system call... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wbitfield-enum-conversion</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wbitfield-enum-conversion</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wshadow-field-in-constructor-modified</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wshadow-field-in-constructor-modified</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wunreachable-code-return</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wunreachable-code-return</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wclass-varargs</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wclass-varargs</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wfloat-overflow-conversion</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wfloat-overflow-conversion</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wfloat-zero-conversion</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wfloat-zero-conversion</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wloop-analysis</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wloop-analysis</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wc</span>++1z-compat... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wc</span>++2a-compat... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wcomma</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wduplicated-cond</span>... no
checking whether the C++ compiler supports <span class="nt">-Wduplicated-cond</span>... no
checking whether the C++ compiler supports <span class="nt">-Wimplicit-fallthrough</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wstring-conversion</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wstring-conversion</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wtautological-overlap-compare</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wtautological-overlap-compare</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wtautological-unsigned-enum-zero-compare</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wtautological-unsigned-enum-zero-compare</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wtautological-unsigned-zero-compare</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wtautological-unsigned-zero-compare</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>tautological-type-limit-compare... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>tautological-type-limit-compare... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-inline-new-delete</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>maybe-uninitialized... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>maybe-uninitialized... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>deprecated-declarations... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>deprecated-declarations... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>array-bounds... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>array-bounds... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>coverage-mismatch... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>coverage-mismatch... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>backend-plugin... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>backend-plugin... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>free-nonheap-object... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>free-nonheap-object... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>multistatement-macros... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>multistatement-macros... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span><span class="k">return</span><span class="nt">-std-move</span>... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span><span class="k">return</span><span class="nt">-std-move</span>... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>class-memaccess... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>class-memaccess... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>atomic-alignment... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>atomic-alignment... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>deprecated-copy... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>deprecated-copy... no
checking whether the C compiler supports <span class="nt">-Wformat</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wformat</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wformat-security</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wformat-security</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wformat-overflow</span><span class="o">=</span>2... no
checking whether the C++ compiler supports <span class="nt">-Wformat-overflow</span><span class="o">=</span>2... no
checking whether the C compiler supports <span class="nt">-Wno-gnu-zero-variadic-macro-arguments</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-gnu-zero-variadic-macro-arguments</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-fno-sized-deallocation</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-fno-aligned-new</span>... <span class="nb">yes
</span>checking <span class="k">for </span>libpulse... <span class="nb">yes
</span>checking MOZ_PULSEAUDIO_CFLAGS... <span class="nt">-D_REENTRANT</span>
checking MOZ_PULSEAUDIO_LIBS... <span class="nt">-lpulse</span>
checking <span class="k">for </span>rustc... /usr/bin/rustc
checking <span class="k">for </span>cargo... /usr/bin/cargo
checking rustc version... 1.39.0
checking cargo version... 1.39.0
checking <span class="k">for </span>rust target triplet... x86_64-unknown-linux-gnu
checking <span class="k">for </span>rust host triplet... x86_64-unknown-linux-gnu
checking <span class="k">for </span>rustdoc... /usr/bin/rustdoc
checking <span class="k">for </span>cbindgen... /home/nonetype/.cargo/bin/cbindgen
checking <span class="k">for </span>rustfmt... not found
checking <span class="k">for </span>clang <span class="k">for </span>bindgen... /usr/bin/clang++
checking <span class="k">for </span>libclang <span class="k">for </span>bindgen... /usr/lib/llvm-6.0/lib/libclang.so.1
checking that libclang is new enough... <span class="nb">yes
</span>checking bindgen cflags... <span class="nt">-x</span> c++ <span class="nt">-fno-sized-deallocation</span> <span class="nt">-fno-aligned-new</span> <span class="nt">-DTRACING</span><span class="o">=</span>1 <span class="nt">-DIMPL_LIBXUL</span> <span class="nt">-DMOZILLA_INTERNAL_API</span> <span class="nt">-DRUST_BINDGEN</span> <span class="nt">-DOS_POSIX</span><span class="o">=</span>1 <span class="nt">-DOS_LINUX</span><span class="o">=</span>1
checking <span class="k">for </span>llvm_profdata... /usr/bin/llvm-profdata
checking <span class="k">for </span>nodejs... no
ERROR: could not find Node.js executable later than 8.11<span class="p">;</span> ensure <span class="sb">`</span>node<span class="sb">`</span> or <span class="sb">`</span>nodejs<span class="sb">`</span> is <span class="k">in </span>PATH or <span class="nb">set </span>NODEJS <span class="k">in </span>environment to point to an executable.

    Executing <span class="sb">`</span>mach bootstrap <span class="nt">--no-system-changes</span><span class="sb">`</span> should
    <span class="nb">install </span>a compatible version <span class="k">in</span> ~/.mozbuild on most platforms.
    If you believe this is a bug, &lt;https://mzl.la/2vLbXAv&gt; is a good way
    to file.  More details: &lt;https://bit.ly/2BbyD1E&gt;
</pre></table></code></div></div><h3 id="solution-5">Solution</h3><p><code class="language-plaintext highlighter-rouge">nodejs</code> 버전이 낮아서 생기는 문제다.</p><p>Ubuntu18.04 기준, <code class="language-plaintext highlighter-rouge">apt install nodejs</code> 명령을 통해 받는 버전은 8.10이므로 아래 명령을 통해 최신 버전의 nodejs를 설치하면 된다. (작성일 기준 최신 nodejs 버전: 12.16.1 LTS)</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>curl <span class="nt">-sL</span> https://deb.nodesource.com/setup_12.x | <span class="nb">sudo</span> <span class="nt">-E</span> bash -
<span class="nb">sudo </span>apt-get <span class="nb">install</span> <span class="nt">-y</span> nodejs
</pre></table></code></div></div><p>아래와 같이 버전을 확인할 수 있다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>nonetype@box:~/hack/browser/firefox<span class="nv">$ </span>nodejs <span class="nt">-v</span>
v12.16.1
nonetype@box:~/hack/browser/firefox<span class="err">$</span>
</pre></table></code></div></div><h2 id="error-nasm-213-or-greater-is-required-for-av1-support">ERROR: nasm 2.13 or greater is required for AV1 support</h2><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
</pre><td class="rouge-code"><pre>nonetype@box:~/hack/browser/firefox/build-72.0-debug<span class="nv">$ </span>../firefox-72.0/configure <span class="nt">--enable-debug</span>
Reexecuting <span class="k">in </span>the virtualenv
checking <span class="k">for </span>vcs <span class="nb">source </span>checkout... no
checking <span class="k">for </span>a shell... /bin/sh
checking <span class="k">for </span>host system type... x86_64-pc-linux-gnu
checking <span class="k">for </span>target system type... x86_64-pc-linux-gnu
checking whether cross compiling... no
checking <span class="k">for </span>Python 3... /usr/bin/python3 <span class="o">(</span>3.6.9<span class="o">)</span>
checking <span class="k">for </span>yasm... not found
checking <span class="k">for </span>the target C compiler... /usr/bin/clang
checking whether the target C compiler can be used... <span class="nb">yes
</span>checking the target C compiler version... 6.0.0checking the target C compiler works... yeschecking <span class="k">for </span>the target C++ compiler... /usr/bin/clang++
checking whether the target C++ compiler can be used... <span class="nb">yes
</span>checking the target C++ compiler version... 6.0.0
checking the target C++ compiler works... yeschecking <span class="k">for </span>the host C compiler... /usr/bin/clang
checking whether the host C compiler can be used... <span class="nb">yes
</span>checking the host C compiler version... 6.0.0
checking the host C compiler works... <span class="nb">yes
</span>checking <span class="k">for </span>the host C++ compiler... /usr/bin/clang++
checking whether the host C++ compiler can be used... <span class="nb">yes
</span>checking the host C++ compiler version... 6.0.0
checking the host C++ compiler works... <span class="nb">yes
</span>checking <span class="k">for </span>64-bit OS... <span class="nb">yes
</span>checking <span class="k">for </span>nasm... not found
checking <span class="k">for </span>linker... bfd
checking <span class="k">for </span>the assembler... /usr/bin/clang
checking <span class="k">for </span>ar... /usr/bin/ar
checking <span class="k">for </span>pkg_config... /usr/bin/pkg-config
checking <span class="k">for </span>pkg-config version... 0.29.1
checking <span class="k">for </span>stdint.h... <span class="nb">yes
</span>checking <span class="k">for </span>inttypes.h... <span class="nb">yes
</span>checking <span class="k">for </span>malloc.h... <span class="nb">yes
</span>checking <span class="k">for </span>alloca.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/byteorder.h... no
checking <span class="k">for </span>getopt.h... <span class="nb">yes
</span>checking <span class="k">for </span>unistd.h... <span class="nb">yes
</span>checking <span class="k">for </span>nl_types.h... <span class="nb">yes
</span>checking <span class="k">for </span>cpuid.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/statvfs.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/statfs.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/vfs.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/mount.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/quota.h... <span class="nb">yes
</span>checking <span class="k">for </span>linux/quota.h... <span class="nb">yes
</span>checking <span class="k">for </span>linux/if_addr.h... <span class="nb">yes
</span>checking <span class="k">for </span>linux/rtnetlink.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/queue.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/types.h... <span class="nb">yes
</span>checking <span class="k">for </span>netinet/in.h... <span class="nb">yes
</span>checking <span class="k">for </span>byteswap.h... <span class="nb">yes
</span>checking <span class="k">for </span>linux/perf_event.h... <span class="nb">yes
</span>checking <span class="k">for </span>perf_event_open system call... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wbitfield-enum-conversion</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wbitfield-enum-conversion</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wshadow-field-in-constructor-modified</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wshadow-field-in-constructor-modified</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wunreachable-code-return</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wunreachable-code-return</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wclass-varargs</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wclass-varargs</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wfloat-overflow-conversion</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wfloat-overflow-conversion</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wfloat-zero-conversion</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wfloat-zero-conversion</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wloop-analysis</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wloop-analysis</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wc</span>++1z-compat... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wc</span>++2a-compat... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wcomma</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wduplicated-cond</span>... no
checking whether the C++ compiler supports <span class="nt">-Wduplicated-cond</span>... no
checking whether the C++ compiler supports <span class="nt">-Wimplicit-fallthrough</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wstring-conversion</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wstring-conversion</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wtautological-overlap-compare</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wtautological-overlap-compare</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wtautological-unsigned-enum-zero-compare</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wtautological-unsigned-enum-zero-compare</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wtautological-unsigned-zero-compare</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wtautological-unsigned-zero-compare</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>tautological-type-limit-compare... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>tautological-type-limit-compare... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-inline-new-delete</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>maybe-uninitialized... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>maybe-uninitialized... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>deprecated-declarations... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>deprecated-declarations... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>array-bounds... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>array-bounds... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>coverage-mismatch... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>coverage-mismatch... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>backend-plugin... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>backend-plugin... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>free-nonheap-object... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>free-nonheap-object... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>multistatement-macros... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>multistatement-macros... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span><span class="k">return</span><span class="nt">-std-move</span>... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span><span class="k">return</span><span class="nt">-std-move</span>... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>class-memaccess... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>class-memaccess... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>atomic-alignment... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>atomic-alignment... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>deprecated-copy... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>deprecated-copy... no
checking whether the C compiler supports <span class="nt">-Wformat</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wformat</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wformat-security</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wformat-security</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wformat-overflow</span><span class="o">=</span>2... no
checking whether the C++ compiler supports <span class="nt">-Wformat-overflow</span><span class="o">=</span>2... no
checking whether the C compiler supports <span class="nt">-Wno-gnu-zero-variadic-macro-arguments</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-gnu-zero-variadic-macro-arguments</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-fno-sized-deallocation</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-fno-aligned-new</span>... <span class="nb">yes
</span>checking <span class="k">for </span>libpulse... <span class="nb">yes
</span>checking MOZ_PULSEAUDIO_CFLAGS... <span class="nt">-D_REENTRANT</span>
checking MOZ_PULSEAUDIO_LIBS... <span class="nt">-lpulse</span>
checking <span class="k">for </span>rustc... /usr/bin/rustc
checking <span class="k">for </span>cargo... /usr/bin/cargo
checking rustc version... 1.39.0
checking cargo version... 1.39.0
checking <span class="k">for </span>rust target triplet... x86_64-unknown-linux-gnu
checking <span class="k">for </span>rust host triplet... x86_64-unknown-linux-gnu
checking <span class="k">for </span>rustdoc... /usr/bin/rustdoc
checking <span class="k">for </span>cbindgen... /home/nonetype/.cargo/bin/cbindgen
checking <span class="k">for </span>rustfmt... not found
checking <span class="k">for </span>clang <span class="k">for </span>bindgen... /usr/bin/clang++
checking <span class="k">for </span>libclang <span class="k">for </span>bindgen... /usr/lib/llvm-6.0/lib/libclang.so.1
checking that libclang is new enough... <span class="nb">yes
</span>checking bindgen cflags... <span class="nt">-x</span> c++ <span class="nt">-fno-sized-deallocation</span> <span class="nt">-fno-aligned-new</span> <span class="nt">-DTRACING</span><span class="o">=</span>1 <span class="nt">-DIMPL_LIBXUL</span> <span class="nt">-DMOZILLA_INTERNAL_API</span> <span class="nt">-DRUST_BINDGEN</span> <span class="nt">-DOS_POSIX</span><span class="o">=</span>1 <span class="nt">-DOS_LINUX</span><span class="o">=</span>1
checking <span class="k">for </span>llvm_profdata... /usr/bin/llvm-profdata
checking <span class="k">for </span>nodejs... /usr/bin/nodejs <span class="o">(</span>12.16.1<span class="o">)</span>
checking <span class="k">for </span>gtk+-wayland-3.0 <span class="o">&gt;=</span> 3.10 xkbcommon <span class="o">&gt;=</span> 0.4.1 libdrm <span class="o">&gt;=</span> 2.4... <span class="nb">yes
</span>checking MOZ_WAYLAND_CFLAGS... <span class="nt">-pthread</span> <span class="nt">-I</span>/usr/include/gtk-3.0 <span class="nt">-I</span>/usr/include/at-spi2-atk/2.0 <span class="nt">-I</span>/usr/include/at-spi-2.0 <span class="nt">-I</span>/usr/include/dbus-1.0 <span class="nt">-I</span>/usr/lib/x86_64-linux-gnu/dbus-1.0/include <span class="nt">-I</span>/usr/include/gtk-3.0 <span class="nt">-I</span>/usr/include/gio-unix-2.
0/ <span class="nt">-I</span>/usr/include/cairo <span class="nt">-I</span>/usr/include/pango-1.0 <span class="nt">-I</span>/usr/include/harfbuzz <span class="nt">-I</span>/usr/include/pango-1.0 <span class="nt">-I</span>/usr/include/atk-1.0 <span class="nt">-I</span>/usr/include/cairo <span class="nt">-I</span>/usr/include/pixman-1 <span class="nt">-I</span>/usr/include/freetype2 <span class="nt">-I</span>/usr/include/libpng16 <span class="nt">-I</span>/usr/include/freetype
2 <span class="nt">-I</span>/usr/include/libpng16 <span class="nt">-I</span>/usr/include/gdk-pixbuf-2.0 <span class="nt">-I</span>/usr/include/libpng16 <span class="nt">-I</span>/usr/include/glib-2.0 <span class="nt">-I</span>/usr/lib/x86_64-linux-gnu/glib-2.0/include <span class="nt">-I</span>/usr/include/libdrm
checking MOZ_WAYLAND_LIBS... <span class="nt">-lgtk-3</span> <span class="nt">-lgdk-3</span> <span class="nt">-lpangocairo-1</span>.0 <span class="nt">-lpango-1</span>.0 <span class="nt">-latk-1</span>.0 <span class="nt">-lcairo-gobject</span> <span class="nt">-lcairo</span> <span class="nt">-lgdk_pixbuf-2</span>.0 <span class="nt">-lgio-2</span>.0 <span class="nt">-lgobject-2</span>.0 <span class="nt">-lglib-2</span>.0 <span class="nt">-lxkbcommon</span> <span class="nt">-ldrm</span>
checking <span class="k">for </span>pango <span class="o">&gt;=</span> 1.22.0 pangoft2 <span class="o">&gt;=</span> 1.22.0 pangocairo <span class="o">&gt;=</span> 1.22.0... <span class="nb">yes
</span>checking MOZ_PANGO_CFLAGS... <span class="nt">-I</span>/usr/include/pango-1.0 <span class="nt">-I</span>/usr/include/harfbuzz <span class="nt">-I</span>/usr/include/pango-1.0 <span class="nt">-I</span>/usr/include/cairo <span class="nt">-I</span>/usr/include/glib-2.0 <span class="nt">-I</span>/usr/lib/x86_64-linux-gnu/glib-2.0/include <span class="nt">-I</span>/usr/include/pixman-1 <span class="nt">-I</span>/usr/include/freety
pe2 <span class="nt">-I</span>/usr/include/libpng16 <span class="nt">-I</span>/usr/include/freetype2 <span class="nt">-I</span>/usr/include/libpng16
checking MOZ_PANGO_LIBS... <span class="nt">-lpangoft2-1</span>.0 <span class="nt">-lfontconfig</span> <span class="nt">-lfreetype</span> <span class="nt">-lpangocairo-1</span>.0 <span class="nt">-lpango-1</span>.0 <span class="nt">-lgobject-2</span>.0 <span class="nt">-lglib-2</span>.0 <span class="nt">-lcairo</span>
checking <span class="k">for </span>fontconfig <span class="o">&gt;=</span> 2.7.0... <span class="nb">yes
</span>checking _FONTCONFIG_CFLAGS... <span class="nt">-I</span>/usr/include/freetype2 <span class="nt">-I</span>/usr/include/libpng16 <span class="nt">-I</span>/usr/include/freetype2 <span class="nt">-I</span>/usr/include/libpng16
checking _FONTCONFIG_LIBS... <span class="nt">-lfontconfig</span> <span class="nt">-lfreetype</span>
checking <span class="k">for </span>freetype2 <span class="o">&gt;=</span> 6.1.0... <span class="nb">yes
</span>checking _FT2_CFLAGS... <span class="nt">-I</span>/usr/include/freetype2 <span class="nt">-I</span>/usr/include/libpng16
checking _FT2_LIBS... <span class="nt">-lfreetype</span>
ERROR: nasm 2.13 or greater is required <span class="k">for </span>AV1 support. Either <span class="nb">install </span>nasm or add <span class="nt">--disable-av1</span> to your configure options.
</pre></table></code></div></div><h3 id="solution-6">Solution</h3><p>내 경우에는 <code class="language-plaintext highlighter-rouge">nasm</code>이 설치되어 있지 않아 발생하는 문제였다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>nonetype@box:~/hack/browser/firefox/build-72.0-debug<span class="nv">$ </span>nasm <span class="nt">-v</span>

Command <span class="s1">'nasm'</span> not found, but can be installed with:

<span class="nb">sudo </span>apt <span class="nb">install </span>nasm
</pre></table></code></div></div><p>아래 명령을 통해 <code class="language-plaintext highlighter-rouge">nasm</code>을 설치하면 해결된다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>apt <span class="nb">install </span>nasm
</pre></table></code></div></div><h2 id="error-yasm-is-required-to-build-with-ffvpx-jpeg-libav-and-vpx">ERROR: Yasm is required to build with ffvpx, jpeg, libav and vpx</h2><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
</pre><td class="rouge-code"><pre>nonetype@box:~/hack/browser/firefox/build-72.0-debug<span class="nv">$ </span>../firefox-72.0/configure <span class="nt">--enable-debug</span>
Reexecuting <span class="k">in </span>the virtualenv
checking <span class="k">for </span>vcs <span class="nb">source </span>checkout... no
checking <span class="k">for </span>a shell... /bin/sh
checking <span class="k">for </span>host system type... x86_64-pc-linux-gnu
checking <span class="k">for </span>target system type... x86_64-pc-linux-gnu
checking whether cross compiling... no
checking <span class="k">for </span>Python 3... /usr/bin/python3 <span class="o">(</span>3.6.9<span class="o">)</span>
checking <span class="k">for </span>yasm... not found
checking <span class="k">for </span>the target C compiler... /usr/bin/clang
checking whether the target C compiler can be used... <span class="nb">yes
</span>checking the target C compiler version... 6.0.0
checking the target C compiler works... <span class="nb">yes
</span>checking <span class="k">for </span>the target C++ compiler... /usr/bin/clang++
checking whether the target C++ compiler can be used... <span class="nb">yes
</span>checking the target C++ compiler version... 6.0.0
checking the target C++ compiler works... <span class="nb">yes
</span>checking <span class="k">for </span>the host C compiler... /usr/bin/clang
checking whether the host C compiler can be used... <span class="nb">yes
</span>checking the host C compiler version... 6.0.0
checking the host C compiler works... <span class="nb">yes
</span>checking <span class="k">for </span>the host C++ compiler... /usr/bin/clang++
checking whether the host C++ compiler can be used... <span class="nb">yes
</span>checking the host C++ compiler version... 6.0.0
checking the host C++ compiler works... <span class="nb">yes
</span>checking <span class="k">for </span>64-bit OS... <span class="nb">yes
</span>checking <span class="k">for </span>nasm... /usr/bin/nasm
checking nasm version... 2.13.02
checking <span class="k">for </span>linker... bfd
checking <span class="k">for </span>the assembler... /usr/bin/clang
checking <span class="k">for </span>ar... /usr/bin/ar
checking <span class="k">for </span>pkg_config... /usr/bin/pkg-config
checking <span class="k">for </span>pkg-config version... 0.29.1
checking <span class="k">for </span>stdint.h... <span class="nb">yes
</span>checking <span class="k">for </span>inttypes.h... <span class="nb">yes
</span>checking <span class="k">for </span>malloc.h... <span class="nb">yes
</span>checking <span class="k">for </span>alloca.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/byteorder.h... no
checking <span class="k">for </span>getopt.h... <span class="nb">yes
</span>checking <span class="k">for </span>unistd.h... <span class="nb">yes
</span>checking <span class="k">for </span>nl_types.h... <span class="nb">yes
</span>checking <span class="k">for </span>cpuid.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/statvfs.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/statfs.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/vfs.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/mount.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/quota.h... <span class="nb">yes
</span>checking <span class="k">for </span>linux/quota.h... <span class="nb">yes
</span>checking <span class="k">for </span>linux/if_addr.h... <span class="nb">yes
</span>checking <span class="k">for </span>linux/rtnetlink.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/queue.h... <span class="nb">yes
</span>checking <span class="k">for </span>sys/types.h... <span class="nb">yes
</span>checking <span class="k">for </span>netinet/in.h... <span class="nb">yes
</span>checking <span class="k">for </span>byteswap.h... <span class="nb">yes
</span>checking <span class="k">for </span>linux/perf_event.h... <span class="nb">yes
</span>checking <span class="k">for </span>perf_event_open system call... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wbitfield-enum-conversion</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wbitfield-enum-conversion</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wshadow-field-in-constructor-modified</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wshadow-field-in-constructor-modified</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wunreachable-code-return</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wunreachable-code-return</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wclass-varargs</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wclass-varargs</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wfloat-overflow-conversion</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wfloat-overflow-conversion</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wfloat-zero-conversion</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wfloat-zero-conversion</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wloop-analysis</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wloop-analysis</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wc</span>++1z-compat... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wc</span>++2a-compat... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wcomma</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wduplicated-cond</span>... no
checking whether the C++ compiler supports <span class="nt">-Wduplicated-cond</span>... no
checking whether the C++ compiler supports <span class="nt">-Wimplicit-fallthrough</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wstring-conversion</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wstring-conversion</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wtautological-overlap-compare</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wtautological-overlap-compare</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wtautological-unsigned-enum-zero-compare</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wtautological-unsigned-enum-zero-compare</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wtautological-unsigned-zero-compare</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wtautological-unsigned-zero-compare</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>tautological-type-limit-compare... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>tautological-type-limit-compare... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-inline-new-delete</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>maybe-uninitialized... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>maybe-uninitialized... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>deprecated-declarations... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>deprecated-declarations... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>array-bounds... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>array-bounds... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>coverage-mismatch... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>coverage-mismatch... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>backend-plugin... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>backend-plugin... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>free-nonheap-object... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>free-nonheap-object... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>multistatement-macros... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>multistatement-macros... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span><span class="k">return</span><span class="nt">-std-move</span>... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span><span class="k">return</span><span class="nt">-std-move</span>... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>class-memaccess... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>class-memaccess... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>atomic-alignment... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>atomic-alignment... no
checking whether the C compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>deprecated-copy... no
checking whether the C++ compiler supports <span class="nt">-Wno-error</span><span class="o">=</span>deprecated-copy... no
checking whether the C compiler supports <span class="nt">-Wformat</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wformat</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wformat-security</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wformat-security</span>... <span class="nb">yes
</span>checking whether the C compiler supports <span class="nt">-Wformat-overflow</span><span class="o">=</span>2... no
checking whether the C++ compiler supports <span class="nt">-Wformat-overflow</span><span class="o">=</span>2... no
checking whether the C compiler supports <span class="nt">-Wno-gnu-zero-variadic-macro-arguments</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-Wno-gnu-zero-variadic-macro-arguments</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-fno-sized-deallocation</span>... <span class="nb">yes
</span>checking whether the C++ compiler supports <span class="nt">-fno-aligned-new</span>... <span class="nb">yes
</span>checking <span class="k">for </span>libpulse... <span class="nb">yes
</span>checking MOZ_PULSEAUDIO_CFLAGS... <span class="nt">-D_REENTRANT</span>
checking MOZ_PULSEAUDIO_LIBS... <span class="nt">-lpulse</span>
checking <span class="k">for </span>rustc... /usr/bin/rustc
checking <span class="k">for </span>cargo... /usr/bin/cargo
checking rustc version... 1.39.0
checking cargo version... 1.39.0
checking <span class="k">for </span>rust target triplet... x86_64-unknown-linux-gnu
checking <span class="k">for </span>rust host triplet... x86_64-unknown-linux-gnu
checking <span class="k">for </span>rustdoc... /usr/bin/rustdoc
checking <span class="k">for </span>cbindgen... /home/nonetype/.cargo/bin/cbindgen
checking <span class="k">for </span>rustfmt... not found
checking <span class="k">for </span>clang <span class="k">for </span>bindgen... /usr/bin/clang++
checking <span class="k">for </span>libclang <span class="k">for </span>bindgen... /usr/lib/llvm-6.0/lib/libclang.so.1
checking that libclang is new enough... <span class="nb">yes
</span>checking bindgen cflags... <span class="nt">-x</span> c++ <span class="nt">-fno-sized-deallocation</span> <span class="nt">-fno-aligned-new</span> <span class="nt">-DTRACING</span><span class="o">=</span>1 <span class="nt">-DIMPL_LIBXUL</span> <span class="nt">-DMOZILLA_INTERNAL_API</span> <span class="nt">-DRUST_BINDGEN</span> <span class="nt">-DOS_POSIX</span><span class="o">=</span>1 <span class="nt">-DOS_LINUX</span><span class="o">=</span>1
checking <span class="k">for </span>llvm_profdata... /usr/bin/llvm-profdata
checking <span class="k">for </span>nodejs... /usr/bin/nodejs <span class="o">(</span>12.16.1<span class="o">)</span>
checking <span class="k">for </span>gtk+-wayland-3.0 <span class="o">&gt;=</span> 3.10 xkbcommon <span class="o">&gt;=</span> 0.4.1 libdrm <span class="o">&gt;=</span> 2.4... <span class="nb">yes
</span>checking MOZ_WAYLAND_CFLAGS... <span class="nt">-pthread</span> <span class="nt">-I</span>/usr/include/gtk-3.0 <span class="nt">-I</span>/usr/include/at-spi2-atk/2.0 <span class="nt">-I</span>/usr/include/at-spi-2.0 <span class="nt">-I</span>/usr/include/dbus-1.0 <span class="nt">-I</span>/usr/lib/x86_64-linux-gnu/dbus-1.0/include <span class="nt">-I</span>/usr/include/gtk-3.0 <span class="nt">-I</span>/usr/include/gio-unix-2.0/ <span class="nt">-I</span>/usr/include/cairo <span class="nt">-I</span>/usr/include/pango-1.0 <span class="nt">-I</span>/usr/include/harfbuzz <span class="nt">-I</span>/usr/include/pango-1.0 <span class="nt">-I</span>/usr/include/atk-1.0 <span class="nt">-I</span>/usr/include/cairo <span class="nt">-I</span>/usr/include/pixman-1 <span class="nt">-I</span>/usr/include/freetype2 <span class="nt">-I</span>/usr/include/libpng16 <span class="nt">-I</span>/usr/include/freetype2 <span class="nt">-I</span>/usr/include/libpng16 <span class="nt">-I</span>/usr/include/gdk-pixbuf-2.0 <span class="nt">-I</span>/usr/include/libpng16 <span class="nt">-I</span>/usr/include/glib-2.0 <span class="nt">-I</span>/usr/lib/x86_64-linux-gnu/glib-2.0/include <span class="nt">-I</span>/usr/include/libdrm
checking MOZ_WAYLAND_LIBS... <span class="nt">-lgtk-3</span> <span class="nt">-lgdk-3</span> <span class="nt">-lpangocairo-1</span>.0 <span class="nt">-lpango-1</span>.0 <span class="nt">-latk-1</span>.0 <span class="nt">-lcairo-gobject</span> <span class="nt">-lcairo</span> <span class="nt">-lgdk_pixbuf-2</span>.0 <span class="nt">-lgio-2</span>.0 <span class="nt">-lgobject-2</span>.0 <span class="nt">-lglib-2</span>.0 <span class="nt">-lxkbcommon</span> <span class="nt">-ldrm</span>
checking <span class="k">for </span>pango <span class="o">&gt;=</span> 1.22.0 pangoft2 <span class="o">&gt;=</span> 1.22.0 pangocairo <span class="o">&gt;=</span> 1.22.0... <span class="nb">yes
</span>checking MOZ_PANGO_CFLAGS... <span class="nt">-I</span>/usr/include/pango-1.0 <span class="nt">-I</span>/usr/include/harfbuzz <span class="nt">-I</span>/usr/include/pango-1.0 <span class="nt">-I</span>/usr/include/cairo <span class="nt">-I</span>/usr/include/glib-2.0 <span class="nt">-I</span>/usr/lib/x86_64-linux-gnu/glib-2.0/include <span class="nt">-I</span>/usr/include/pixman-1 <span class="nt">-I</span>/usr/include/freetype2 <span class="nt">-I</span>/usr/include/libpng16 <span class="nt">-I</span>/usr/include/freetype2 <span class="nt">-I</span>/usr/include/libpng16
checking MOZ_PANGO_LIBS... <span class="nt">-lpangoft2-1</span>.0 <span class="nt">-lfontconfig</span> <span class="nt">-lfreetype</span> <span class="nt">-lpangocairo-1</span>.0 <span class="nt">-lpango-1</span>.0 <span class="nt">-lgobject-2</span>.0 <span class="nt">-lglib-2</span>.0 <span class="nt">-lcairo</span>
checking <span class="k">for </span>fontconfig <span class="o">&gt;=</span> 2.7.0... <span class="nb">yes
</span>checking _FONTCONFIG_CFLAGS... <span class="nt">-I</span>/usr/include/freetype2 <span class="nt">-I</span>/usr/include/libpng16 <span class="nt">-I</span>/usr/include/freetype2 <span class="nt">-I</span>/usr/include/libpng16
checking _FONTCONFIG_LIBS... <span class="nt">-lfontconfig</span> <span class="nt">-lfreetype</span>
checking <span class="k">for </span>freetype2 <span class="o">&gt;=</span> 6.1.0... <span class="nb">yes
</span>checking _FT2_CFLAGS... <span class="nt">-I</span>/usr/include/freetype2 <span class="nt">-I</span>/usr/include/libpng16
checking _FT2_LIBS... <span class="nt">-lfreetype</span>
checking <span class="k">for </span>tar... /bin/tar
checking <span class="k">for </span>unzip... /usr/bin/unzip
checking <span class="k">for </span>zip... /usr/bin/zip
checking <span class="k">for </span>gn... not found
checking <span class="k">for </span>the Mozilla API key... no
checking <span class="k">for </span>the Google Location Service API key... no
checking <span class="k">for </span>the Google Safebrowsing API key... no
checking <span class="k">for </span>the Bing API key... no
checking <span class="k">for </span>the Adjust SDK key... no
checking <span class="k">for </span>the Leanplum SDK key... no
checking <span class="k">for </span>the Pocket API key... no
ERROR: Yasm is required to build with ffvpx, jpeg, libav and vpx, but you <span class="k">do </span>not appear to have Yasm installed.
</pre></table></code></div></div><h3 id="solution-7">Solution</h3><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>apt <span class="nb">install </span>yasm
</pre></table></code></div></div><h2 id="configure-error-library-requirements">configure: error: Library requirements</h2><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre><td class="rouge-code"><pre>nonetype@box:~/hack/browser/firefox/build-72.0-debug<span class="nv">$ </span>../firefox-72.0/configure <span class="nt">--enable-debug</span>
Reexecuting <span class="k">in </span>the virtualenv
checking <span class="k">for </span>vcs <span class="nb">source </span>checkout... no
checking <span class="k">for </span>a shell... /bin/sh
...
...
checking MOZ_GTK3_CFLAGS... <span class="nt">-pthread</span> <span class="nt">-I</span>/usr/include/gtk-3.0/unix-print <span class="nt">-I</span>/usr/include/gtk-3.0 <span class="nt">-I</span>/usr/include/at-spi2-atk/2.0 <span class="nt">-I</span>/usr/include/at-spi-2.0 <span class="nt">-I</span>/usr/include/dbus-1.0 <span class="nt">-I</span>/usr/lib/x86_64-linux-gnu/dbus-1.0/include <span class="nt">-I</span>/usr/include/gtk-3.0 <span class="nt">-I</span>/usr/include/cairo <span class="nt">-I</span>/usr/include/pango-1.0 <span class="nt">-I</span>/usr/include/harfbuzz <span class="nt">-I</span>/usr/include/pango-1.0 <span class="nt">-I</span>/usr/include/atk-1.0 <span class="nt">-I</span>/usr/include/cairo <span class="nt">-I</span>/usr/include/pixman-1 <span class="nt">-I</span>/usr/include/freetype2 <span class="nt">-I</span>/usr/include/libpng16 <span class="nt">-I</span>/usr/include/freetype2 <span class="nt">-I</span>/usr/include/libpng16 <span class="nt">-I</span>/usr/include/gdk-pixbuf-2.0 <span class="nt">-I</span>/usr/include/libpng16 <span class="nt">-I</span>/usr/include/gio-unix-2.0/ <span class="nt">-I</span>/usr/include/glib-2.0 <span class="nt">-I</span>/usr/lib/x86_64-linux-gnu/glib-2.0/include
checking MOZ_GTK3_LIBS... <span class="nt">-lgtk-3</span> <span class="nt">-lgdk-3</span> <span class="nt">-lpangocairo-1</span>.0 <span class="nt">-lpango-1</span>.0 <span class="nt">-latk-1</span>.0 <span class="nt">-lcairo-gobject</span> <span class="nt">-lcairo</span> <span class="nt">-lgdk_pixbuf-2</span>.0 <span class="nt">-lgio-2</span>.0 <span class="nt">-lgobject-2</span>.0 <span class="nt">-lglib-2</span>.0
checking <span class="k">for </span>gtk+-2.0 <span class="o">&gt;=</span> 2.18.0 gtk+-unix-print-2.0 glib-2.0 <span class="o">&gt;=</span> 2.22 gobject-2.0 gio-unix-2.0 gdk-x11-2.0... Package gtk+-2.0 was not found <span class="k">in </span>the pkg-config search path. Perhaps you should add the directory containing <span class="s1">'gtk+-2.0.pc'</span> to the PKG_CONFIG_PATH environment variable No package <span class="s1">'gtk+-2.0'</span> found Package gtk+-unix-print-2.0 was not found <span class="k">in </span>the pkg-config search path. Perhaps you should add the directory containing <span class="s1">'gtk+-unix-print-2.0.pc'</span> to the PKG_CONFIG_PATH environment variable No package <span class="s1">'gtk+-unix-print-2.0'</span> found Package gdk-x11-2.0 was not found <span class="k">in </span>the pkg-config search path. Perhaps you should add the directory containing <span class="s1">'gdk-x11-2.0.pc'</span> to the PKG_CONFIG_PATH environment variable No package <span class="s1">'gdk-x11-2.0'</span> found
configure: error: Library requirements <span class="o">(</span>gtk+-2.0 <span class="o">&gt;=</span> 2.18.0 gtk+-unix-print-2.0 glib-2.0 <span class="o">&gt;=</span> 2.22 gobject-2.0 gio-unix-2.0 gdk-x11-2.0<span class="o">)</span> not met<span class="p">;</span> consider adjusting the PKG_CONFIG_PATH environment variable <span class="k">if </span>your libraries are <span class="k">in </span>a nonstandard prefix so pkg-config can find them.
DEBUG: &lt;truncated - see config.log <span class="k">for </span>full output&gt;
DEBUG: 1 error generated.
DEBUG: configure: failed program was:
DEBUG: <span class="c">#line 7699 "configure"</span>
DEBUG: <span class="c">#include "confdefs.h"</span>
DEBUG: <span class="c">#include &lt;malloc.h&gt;</span>
DEBUG:                   <span class="c">#include &lt;stddef.h&gt;</span>
DEBUG:                   size_t malloc_usable_size<span class="o">(</span>const void <span class="k">*</span>ptr<span class="o">)</span><span class="p">;</span>
DEBUG: int main<span class="o">()</span> <span class="o">{</span>
DEBUG: <span class="k">return </span>malloc_usable_size<span class="o">(</span>0<span class="o">)</span><span class="p">;</span>
DEBUG: <span class="p">;</span> <span class="k">return </span>0<span class="p">;</span> <span class="o">}</span>
DEBUG: configure:7730: checking <span class="k">for </span>valloc <span class="k">in </span>malloc.h
DEBUG: configure:7755: checking <span class="k">for </span>valloc <span class="k">in </span>unistd.h
DEBUG: configure:7780: checking <span class="k">for </span>_aligned_malloc <span class="k">in </span>malloc.h
DEBUG: configure:7918: checking NSPR selection
DEBUG: configure:8849: checking <span class="k">if </span>app-specific confvars.sh exists
DEBUG: configure:9030: checking <span class="k">for </span>gtk+-3.0 <span class="o">&gt;=</span> 3.4.0 gtk+-unix-print-3.0 glib-2.0 gobject-2.0 gio-unix-2.0
DEBUG: configure:9037: checking MOZ_GTK3_CFLAGS
DEBUG: configure:9042: checking MOZ_GTK3_LIBS
DEBUG: configure:9113: checking <span class="k">for </span>gtk+-2.0 <span class="o">&gt;=</span> 2.18.0 gtk+-unix-print-2.0 glib-2.0 <span class="o">&gt;=</span> 2.22 gobject-2.0 gio-unix-2.0 gdk-x11-2.0
DEBUG: configure: error: Library requirements <span class="o">(</span>gtk+-2.0 <span class="o">&gt;=</span> 2.18.0 gtk+-unix-print-2.0 glib-2.0 <span class="o">&gt;=</span> 2.22 gobject-2.0 gio-unix-2.0 gdk-x11-2.0<span class="o">)</span> not met<span class="p">;</span> consider adjusting the PKG_CONFIG_PATH environment variable <span class="k">if </span>your libraries are <span class="k">in </span>a nonstandard prefix so pkg-config can find them.
ERROR: old-configure failed
</pre></table></code></div></div><h3 id="solution-8">Solution</h3><p><code class="language-plaintext highlighter-rouge">sudo apt (update/upgrade)</code> 후에도 이 문제가 해결되지 않는 경우가 있는데, 아래 라이브러리를 설치하면 해결된다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>apt-get <span class="nb">install </span>libgtk2.0-dev
</pre></table></code></div></div><h1 id="references">References</h1><div class="table-wrapper"><table><thead><tr><th>Title<th>url<th>tags<tbody><tr><td>Javascript Engine(Spider Monkey) Array OOB Analyzing<td><a href="https://bpsecblog.wordpress.com/2017/04/27/javascript_engine_array_oob">link</a><td><code class="language-plaintext highlighter-rouge">pwn</code>, <code class="language-plaintext highlighter-rouge">JIT</code>, <code class="language-plaintext highlighter-rouge">ctf</code>, <code class="language-plaintext highlighter-rouge">OOB</code><tr><td>Attacking Client-Side JIT Compilers (v2)<td><a href="https://saelo.github.io/presentations/blackhat_us_18_attacking_client_side_jit_compilers.pdf">link</a><td><code class="language-plaintext highlighter-rouge">rev</code>, <code class="language-plaintext highlighter-rouge">pwn</code>, <code class="language-plaintext highlighter-rouge">JIT</code>, <code class="language-plaintext highlighter-rouge">pdf</code>, <code class="language-plaintext highlighter-rouge">depth</code><tr><td>Introduction to SpiderMonkey exploitation<td><a href="https://doar-e.github.io/blog/2018/11/19/introduction-to-spidermonkey-exploitation/">link</a><td><code class="language-plaintext highlighter-rouge">rev</code>, <code class="language-plaintext highlighter-rouge">pwn</code>, <code class="language-plaintext highlighter-rouge">basic</code>, <code class="language-plaintext highlighter-rouge">JIT</code>, <code class="language-plaintext highlighter-rouge">ctf</code>, <code class="language-plaintext highlighter-rouge">OOB</code><tr><td>GDB to LLDB command map<td><a href="https://lldb.llvm.org/use/map.html">link</a><td><code class="language-plaintext highlighter-rouge">tool</code>, <code class="language-plaintext highlighter-rouge">rev</code></table></div><div class="footnotes" role="doc-endnotes"><ol><li id="fn:type_masking" role="doc-endnote"><p>자세한 코드는 <code class="language-plaintext highlighter-rouge">js/public/Value.h</code>에서 확인 가능하다. (<code class="language-plaintext highlighter-rouge">constexpr uint64_t ValueGCThingPayloadMask = 0x0000'7FFF'FFFF'FFFF;</code>) <a href="#fnref:type_masking" class="reversefootnote" role="doc-backlink">&#8617;</a></p></ol></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/pwn/'>pwn</a>, <a href='/categories/browser/'>browser</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/firefox/" class="post-tag no-text-decoration" >firefox</a> <a href="/tags/debugging/" class="post-tag no-text-decoration" >debugging</a> <a href="/tags/tips/" class="post-tag no-text-decoration" >tips</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Firefox tip note - do:pwn()&url=https://nonetype.kr/posts/Firefox-tip-note/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Firefox tip note - do:pwn()&u=https://nonetype.kr/posts/Firefox-tip-note/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Firefox tip note - do:pwn()&url=https://nonetype.kr/posts/Firefox-tip-note/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/DLL-Hijacking/">DLL Hijacking Note</a><li><a href="/posts/BlazeCTF2018-blazeme-write-up/">blazeme - BlazeCTF 2018</a><li><a href="/posts/Linux-Kernel-Exploit-Development-lab1/">Linux Kernel Exploit Development (Part 1/10)</a><li><a href="/posts/Linux-Kernel-Exploit-Development-lab2/">Linux Kernel Exploit Development (Part 2/10)</a><li><a href="/posts/Linux-Kernel-Exploit-Development-lab3/">Linux Kernel Exploit Development (Part 3/10)</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/kernel/">kernel</a> <a class="post-tag" href="/tags/exploit/">exploit</a> <a class="post-tag" href="/tags/debugging/">debugging</a> <a class="post-tag" href="/tags/tutorial/">tutorial</a> <a class="post-tag" href="/tags/tips/">tips</a> <a class="post-tag" href="/tags/firefox/">firefox</a> <a class="post-tag" href="/tags/heap/">heap</a> <a class="post-tag" href="/tags/1-day/">1-day</a> <a class="post-tag" href="/tags/analysis/">analysis</a> <a class="post-tag" href="/tags/ctf/">ctf</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/GDB-usage/"><div class="card-body"> <span class="timeago small" > Sep 23, 2019 <i class="unloaded">2019-09-23T00:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>GDB Usage Storage</h3><div class="text-muted small"><p> 잊어버리기 전에 써놓는 GDB 사용 꿀팁들 목차 목차 메모리 내 구조체 확인 조건 break bp hit시마다 명령 실행 소스코드 확인 (디버그 심볼 있어야함) gdb에서 malloc으로 Heap 포인터 받아오기(malloc, kmalloc, vmalloc) Refer...</p></div></div></a></div><div class="card"> <a href="/posts/CVE-2019-9791-Analysis/"><div class="card-body"> <span class="timeago small" > Mar 31, 2020 <i class="unloaded">2020-03-31T00:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>CVE-2019-9791 Analysis</h3><div class="text-muted small"><p> CVE-2019-9791 Firefox IonMonkey Type confusion vulnerability analysis Index Index CVE-2019-9791 Prerequisites knowledge Bug Description Exploitation CV...</p></div></div></a></div><div class="card"> <a href="/posts/Kernel-Debug-With-Vmware/"><div class="card-body"> <span class="timeago small" > Sep 9, 2019 <i class="unloaded">2019-09-09T00:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Linux Kernel debugging with Vmware</h3><div class="text-muted small"><p> VMware를 이용해 리눅스 커널 디버깅을 해보자 목차 목차 guestOS Setting Debug symbol download KASLR 해제 vmx configure remote attach Additional Info References guestOS Setting ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/IoT-Home-Router-Emulation/" class="btn btn-outline-primary" prompt="Older"><p>IoT Firmware Emulation with QEMU</p></a> <a href="/posts/CVE-2019-9791-Analysis/" class="btn btn-outline-primary" prompt="Newer"><p>CVE-2019-9791 Analysis</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://twitter.com/nonetype_pwn">Wonyoung Jung</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/kernel/">kernel</a> <a class="post-tag" href="/tags/exploit/">exploit</a> <a class="post-tag" href="/tags/debugging/">debugging</a> <a class="post-tag" href="/tags/tutorial/">tutorial</a> <a class="post-tag" href="/tags/tips/">tips</a> <a class="post-tag" href="/tags/firefox/">firefox</a> <a class="post-tag" href="/tags/heap/">heap</a> <a class="post-tag" href="/tags/1-day/">1 day</a> <a class="post-tag" href="/tags/analysis/">analysis</a> <a class="post-tag" href="/tags/ctf/">ctf</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://nonetype.kr{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
